<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="author" content="Gaëtan Renaudeau"/><meta name="description" content="We can implement an anythingToRGBA converter in 10 lines of Javascript!"/><meta name="keywords" content="canvas, javascript, color"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@greweb"/><meta name="twitter:title" content="HTML5 Canvas as a color converter"/><meta name="og:title" content="HTML5 Canvas as a color converter"/><meta name="twitter:description" content="We can implement an anythingToRGBA converter in 10 lines of Javascript!"/><meta name="twitter:creator" content="@greweb"/><meta name="og:image" content="http://greweb.me//images/2012/05/color-alpha-options.png"/><meta name="twitter:image" content="http://greweb.me//images/2012/05/color-alpha-options.png"/><link rel="image_src" href="http://greweb.me//images/2012/05/color-alpha-options.png"/><title>@greweb - HTML5 Canvas as a color converter</title><link href="http://fonts.googleapis.com/css?family=Fredericka+the+Great|Arapey|Roboto:400,700,400italic" rel="stylesheet" type="text/css"/><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/styles/default.min.css"/><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/highlight.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/javascript.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/cpp.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/glsl.min.js"></script><link rel="stylesheet" href="/style/main.css"/><meta name="next-head-count" content="25"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-381dbb3c33243b4920e6.js"></script><script src="/_next/static/chunks/webpack-17597d20e291f72b2439.js" defer=""></script><script src="/_next/static/chunks/framework-bdc1b4e5e48979e16d36.js" defer=""></script><script src="/_next/static/chunks/main-4ac108dd57980e4159e9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c981e0e3ce59f13eb8d0.js" defer=""></script><script src="/_next/static/chunks/5988-738c1ea5f97353b6463e.js" defer=""></script><script src="/_next/static/chunks/2242-e809902ac2d7a524d02b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bslug%5D-18d367ef37e4735025ef.js" defer=""></script><script src="/_next/static/k1FUefs6SREL58q9m86-X/_buildManifest.js" defer=""></script><script src="/_next/static/k1FUefs6SREL58q9m86-X/_ssgManifest.js" defer=""></script><style id="__jsx-2519965637">.block.jsx-2519965637{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.block.jsx-2519965637 .right.jsx-2519965637{padding:10px;}.block.jsx-2519965637 .social.jsx-2519965637{margin-top:10px;}.block.jsx-2519965637 .social.jsx-2519965637 a.jsx-2519965637{padding:10px;}.block.jsx-2519965637 .social.jsx-2519965637 img.jsx-2519965637{height:20px;}</style><style id="__jsx-3621368397">.container.jsx-3621368397{min-height:100vh;padding:0 0.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style id="__jsx-3469673304">html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto, Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue, sans-serif;}*{box-sizing:border-box;}a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}a:hover,a:active{-webkit-text-decoration:underline;text-decoration:underline;}</style></head><body><div id="__next"><div class="jsx-3621368397 container"><div id="container"><div id="main"><div id="content"><article><header><h1><a href="/">HTML5 Canvas as a color converter</a></h1><time class="date" dateTime="2012-05-03">2012-05-03</time><span class="tags"><a class="tag">canvas</a><a class="tag">javascript</a><a class="tag">color</a></span></header><div class="entry-content"><img src="/images/2012/05/color-alpha-options.png" alt="" class="thumbnail-left" />

<p>I’m currently working on the User Interface of a scene editor for my <a href="http://gre.github.io/illuminated.js/">Illuminated.js library</a> with some color and alpha picker.</p>
<p>HTML5 now have the <code>&lt;input type=&quot;color&quot; /&gt;</code> and <code>&lt;input type=&quot;range&quot; /&gt;</code> which is nice. It works on Chrome and there are some <a href="https://github.com/bgrins/spectrum">polyfills</a> to make it working on older browsers.</p>
<p>We will now see how we can easily <strong>retrieve a rgba color from such an UI</strong>, regardless of the color format given by the color picker and <strong>combine the alpha component from the alpha range picker</strong>.</p>
<blockquote>
<p>We can implement an <strong>anythingToRGBA converter</strong> in 10 lines of Javascript!</p>
</blockquote>
<h2 id="what">What?</h2>
<p>Basically, for instance, you have this: <code>&quot;#ff6432&quot;</code> and <code>0.8</code></p>
<p>and you want this: <code>&quot;rgba(255,100,50,0.8)&quot;</code></p>
<p>which is this color: <span style="background: #ff6432; display: inline-block; width: 50px">&nbsp;</span>.</p>
<blockquote>
<p>Well, of course, we could use a library with regexp parsers!</p>
</blockquote>
<p>But there is a lot of different formats available especially if you want to convert a color from <a href="http://www.w3.org/TR/css3-color/">CSS</a>!</p>
<p>Only for the <span style="color:blue">blue</span> color, you have at least 7 different representations: <code>#00F</code>, <code>#0000FF</code>, <code>rgb(0,0,255)</code>, <code>rgba(0,0,255,1)</code>, <code>hsl(255,100%,50%)</code>, <code>hsla(255,100%,50%,1)</code>,<br>and… <code>blue</code>!</p>
<blockquote>
<p>Ouch, so let’s make a huge converter library!</p>
</blockquote>
<p>Nope! </p>
<p>All of these are color formats are supported by CSS and also Canvas.<br><strong>So, why not just re-using what the browser can do?</strong></p>
<!--more-->


<h2 id="how">How?</h2>
<p>Because we have access to Canvas in Javascript, <strong>we can implement an anythingToRGBA converter in a few line of Javascript</strong>:</p>
<pre><code class="language-javascript">var getRGBA = (function(){  
  var canvas = document.createElement(&quot;canvas&quot;);  
  canvas.width = canvas.height = 1;  
  var ctx = canvas.getContext(&quot;2d&quot;);  
  return function (color, alpha) {  
    ctx.clearRect(,,1,1);  
    ctx.fillStyle = color;  
    ctx.fillRect(,,1,1);  
    var d = ctx.getImageData(,,1,1).data;  
    return &#39;rgba(&#39; [ d[], d[1], d[2], alpha ] &#39;)&#39;;  
  }  
}());
</code></pre>
<p>You have now a ready to use Javascript color library! </p>
<p><code>getRGBA(&quot;#ff6432&quot;, 0.8)</code> will returns <code>&quot;rgba(255,100,50,0.8)&quot;</code>.<br><code>getRGBA(&quot;red&quot;, 0.5)</code> will returns <code>&quot;rgba(255,0,0,0.5)&quot;</code>.</p>
<p>You can “standardize” your color and use it anywhere!</p>
<p><strong>Feel free to adapt the code to any other desired format.</strong></p>
<p>We can easily make the reverse (give a rgba color and get the #RRGGBB and alpha values):</p>
<pre><code class="language-javascript">var extractColorAndAlpha = (function(){  
  var canvas = document.createElement(&quot;canvas&quot;);  
  canvas.width = canvas.height = 1;  
  var ctx = canvas.getContext(&quot;2d&quot;);  
  
  function toHex (value) {   
    var s = value.toString(16);   
    if(s.length==1) s = &quot;0&quot; s;  
    return s;  
  }  
  
  return function (color) {  
    ctx.clearRect(,,1,1);  
    ctx.fillStyle = color;  
    ctx.fillRect(,,1,1);  
    var d = ctx.getImageData(,,1,1).data;  
    return {  
      color: &quot;#&quot; toHex(d[]) toHex(d[1]) toHex(d[2]),  
      alpha: Math.round(1000*d[3]/255)/1000  
    };  
  }  
}());
</code></pre>
</div><footer><div class="jsx-2519965637 block"><img src="http://greweb.me/logo.svg" width="100" class="jsx-2519965637"/><div class="jsx-2519965637 right"><div class="jsx-2519965637 description">As a generative plotter artist, I use code to create art (creative coding), draw with fountain pens on robots (plotting), and explore the boundaries of abstract art using algorithms in pursuit of increasingly realistic imagery. I do not produce prints; instead, I create unique &#x27;plots&#x27; - physical works of art that are truly one-of-a-kind.</div><div class="jsx-2519965637 social"><a href="https://twitter.com/greweb" class="jsx-2519965637"><img alt="" src="/icons/twitter.svg" class="jsx-2519965637"/></a><a href="https://instagram.com/greweb" class="jsx-2519965637"><img alt="" src="/icons/instagram.svg" class="jsx-2519965637"/></a><a href="https://twitch.tv/greweb" class="jsx-2519965637"><img alt="" src="/icons/twitch.svg" class="jsx-2519965637"/></a><a href="https://github.com/gre" class="jsx-2519965637"><img alt="" src="/icons/github.svg" class="jsx-2519965637"/></a><a href="https://opensea.io/greweb?tab=created" class="jsx-2519965637"><img alt="" src="/icons/eth.svg" class="jsx-2519965637"/></a><a href="https://fxhash.xyz/u/greweb" class="jsx-2519965637"><img alt="" src="/icons/tz.svg" class="jsx-2519965637"/></a><a href="https://greweb.itch.io" class="jsx-2519965637"><img alt="" src="/icons/iconmonstr-gamepad-3.svg" class="jsx-2519965637"/></a></div></div></div></footer></article></div></div></div><script>hljs.highlightAll();</script></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"2012-05-03-html5-canvas-as-a-color-converter","year":"2012","month":"05","day":"03","slug":"html5-canvas-as-a-color-converter","content":"\u003cimg src=\"/images/2012/05/color-alpha-options.png\" alt=\"\" class=\"thumbnail-left\" /\u003e\n\n\u003cp\u003eI’m currently working on the User Interface of a scene editor for my \u003ca href=\"http://gre.github.io/illuminated.js/\"\u003eIlluminated.js library\u003c/a\u003e with some color and alpha picker.\u003c/p\u003e\n\u003cp\u003eHTML5 now have the \u003ccode\u003e\u0026lt;input type=\u0026quot;color\u0026quot; /\u0026gt;\u003c/code\u003e and \u003ccode\u003e\u0026lt;input type=\u0026quot;range\u0026quot; /\u0026gt;\u003c/code\u003e which is nice. It works on Chrome and there are some \u003ca href=\"https://github.com/bgrins/spectrum\"\u003epolyfills\u003c/a\u003e to make it working on older browsers.\u003c/p\u003e\n\u003cp\u003eWe will now see how we can easily \u003cstrong\u003eretrieve a rgba color from such an UI\u003c/strong\u003e, regardless of the color format given by the color picker and \u003cstrong\u003ecombine the alpha component from the alpha range picker\u003c/strong\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe can implement an \u003cstrong\u003eanythingToRGBA converter\u003c/strong\u003e in 10 lines of Javascript!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"what\"\u003eWhat?\u003c/h2\u003e\n\u003cp\u003eBasically, for instance, you have this: \u003ccode\u003e\u0026quot;#ff6432\u0026quot;\u003c/code\u003e and \u003ccode\u003e0.8\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eand you want this: \u003ccode\u003e\u0026quot;rgba(255,100,50,0.8)\u0026quot;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003ewhich is this color: \u003cspan style=\"background: #ff6432; display: inline-block; width: 50px\"\u003e\u0026nbsp;\u003c/span\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWell, of course, we could use a library with regexp parsers!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eBut there is a lot of different formats available especially if you want to convert a color from \u003ca href=\"http://www.w3.org/TR/css3-color/\"\u003eCSS\u003c/a\u003e!\u003c/p\u003e\n\u003cp\u003eOnly for the \u003cspan style=\"color:blue\"\u003eblue\u003c/span\u003e color, you have at least 7 different representations: \u003ccode\u003e#00F\u003c/code\u003e, \u003ccode\u003e#0000FF\u003c/code\u003e, \u003ccode\u003ergb(0,0,255)\u003c/code\u003e, \u003ccode\u003ergba(0,0,255,1)\u003c/code\u003e, \u003ccode\u003ehsl(255,100%,50%)\u003c/code\u003e, \u003ccode\u003ehsla(255,100%,50%,1)\u003c/code\u003e,\u003cbr\u003eand… \u003ccode\u003eblue\u003c/code\u003e!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOuch, so let’s make a huge converter library!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNope! \u003c/p\u003e\n\u003cp\u003eAll of these are color formats are supported by CSS and also Canvas.\u003cbr\u003e\u003cstrong\u003eSo, why not just re-using what the browser can do?\u003c/strong\u003e\u003c/p\u003e\n\u003c!--more--\u003e\n\n\n\u003ch2 id=\"how\"\u003eHow?\u003c/h2\u003e\n\u003cp\u003eBecause we have access to Canvas in Javascript, \u003cstrong\u003ewe can implement an anythingToRGBA converter in a few line of Javascript\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar getRGBA = (function(){  \n  var canvas = document.createElement(\u0026quot;canvas\u0026quot;);  \n  canvas.width = canvas.height = 1;  \n  var ctx = canvas.getContext(\u0026quot;2d\u0026quot;);  \n  return function (color, alpha) {  \n    ctx.clearRect(,,1,1);  \n    ctx.fillStyle = color;  \n    ctx.fillRect(,,1,1);  \n    var d = ctx.getImageData(,,1,1).data;  \n    return \u0026#39;rgba(\u0026#39; [ d[], d[1], d[2], alpha ] \u0026#39;)\u0026#39;;  \n  }  \n}());\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou have now a ready to use Javascript color library! \u003c/p\u003e\n\u003cp\u003e\u003ccode\u003egetRGBA(\u0026quot;#ff6432\u0026quot;, 0.8)\u003c/code\u003e will returns \u003ccode\u003e\u0026quot;rgba(255,100,50,0.8)\u0026quot;\u003c/code\u003e.\u003cbr\u003e\u003ccode\u003egetRGBA(\u0026quot;red\u0026quot;, 0.5)\u003c/code\u003e will returns \u003ccode\u003e\u0026quot;rgba(255,0,0,0.5)\u0026quot;\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eYou can “standardize” your color and use it anywhere!\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eFeel free to adapt the code to any other desired format.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eWe can easily make the reverse (give a rgba color and get the #RRGGBB and alpha values):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003evar extractColorAndAlpha = (function(){  \n  var canvas = document.createElement(\u0026quot;canvas\u0026quot;);  \n  canvas.width = canvas.height = 1;  \n  var ctx = canvas.getContext(\u0026quot;2d\u0026quot;);  \n  \n  function toHex (value) {   \n    var s = value.toString(16);   \n    if(s.length==1) s = \u0026quot;0\u0026quot; s;  \n    return s;  \n  }  \n  \n  return function (color) {  \n    ctx.clearRect(,,1,1);  \n    ctx.fillStyle = color;  \n    ctx.fillRect(,,1,1);  \n    var d = ctx.getImageData(,,1,1).data;  \n    return {  \n      color: \u0026quot;#\u0026quot; toHex(d[]) toHex(d[1]) toHex(d[2]),  \n      alpha: Math.round(1000*d[3]/255)/1000  \n    };  \n  }  \n}());\n\u003c/code\u003e\u003c/pre\u003e\n","data":{"title":"HTML5 Canvas as a color converter","author":"Gaetan","description":"We can implement an anythingToRGBA converter in 10 lines of Javascript!","thumbnail":"/images/2012/05/color-alpha-options.png","layout":"post","permalink":"/2012/05/html5-canvas-as-a-color-converter/","tags":["canvas","javascript","color"]}},"__N_SSG":true},"page":"/[year]/[month]/[slug]","query":{"year":"2012","month":"05","slug":"html5-canvas-as-a-color-converter"},"buildId":"k1FUefs6SREL58q9m86-X","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>