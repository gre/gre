import fs from "fs";
let dict = ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4145+4647,2123+6163,4227+7257+1393+0585,7232232475867727+5158,0322432403+0693+7596775675,84771634872262,5153,61434668,31535638,1476+7416+4347,1575+4347,464738,1585,3656573736,1871,722227777227,135257,1272741777,22727434747727,85156267,722224747727,722227777424,128237,74242272772724,752522727727,4344+4647,4353544443+465657394746,831587,1484+1686,138517,2241617273544546+4748,,17425287+6535,116182836414648586671711,823214153787,,,822227+3484,,,6121+4147+2767,,,212787,1711457177,,,,,,722224757727,,,,,,,,71414878,1178,21515828,,,3152,752527777323,2373772721,8333153787,7323277771,871713838515,3383+814147,772723737929,2127+247477,4151+33535777,4151+33535929,2127+873583,2151566787,17137377+4347,27237377,2373772723,2777732329,7727237379,3337+445383,732324767727,2373+424777,2326375766+7773,13475783,1337547793,1387+1783,13573983,23732777,71515344141545565878,5159,21414354848555464828"
  .split(",")

let out = Array(255).fill("");
const costs = []
fs.readFileSync("m.mjs").toString().split("").forEach((c) => {
  let i = c.charCodeAt(0);
  if (dict[i] && !out[i]) {
    out[i] = dict[i];
    costs.push([c, dict[i].length, dict[i]]);
  }
});

const prev = Array(255).fill("");
fs.readFileSync("../1353/index.mjs").toString().split("").forEach((c) => {
  let i = c.charCodeAt(0);
  if (dict[i] && !prev[i]) {
    prev[i] = dict[i];
  }
});

for (let i = 0; i < out.length; i++) {
  if (!out[i] && prev[i]) {
    console.log("was reduced from 1353: ", String.fromCharCode(i))
  }
}

costs.sort((a, b) => b[1] - a[1]);
console.log(costs.join("\n"));
let max = -1;
let min = Infinity;
out.forEach((_, i) => {
  if (out[i]) {
    max = Math.max(max, i);
    min = Math.min(min, i);
  }
});
out.splice(max + 1);
console.log("min", min)
console.log(out.slice(min).join(","));