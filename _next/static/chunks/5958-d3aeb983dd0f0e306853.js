(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5958],{5958:function(t,e){var r=Object.defineProperty;r(e,"__esModule",{value:!0}),((t,e)=>{for(var n in e)r(t,n,{get:e[n],enumerable:!0})})(e,{GIFEncoder:()=>x,applyPalette:()=>m,default:()=>V,nearestColor:()=>k,nearestColorIndex:()=>M,nearestColorIndexWithDistance:()=>U,prequantize:()=>B,quantize:()=>y,snapColorsToPalette:()=>d});var n=59;function o(t=256){let e=0,r=new Uint8Array(t);return{get buffer(){return r.buffer},reset(){e=0},bytesView:()=>r.subarray(0,e),bytes:()=>r.slice(0,e),writeByte(t){n(e+1),r[e]=t,e++},writeBytes(t,o=0,c=t.length){n(e+c);for(let n=0;n<c;n++)r[e++]=t[n+o]},writeBytesView(t,o=0,c=t.byteLength){n(e+c),r.set(t.subarray(o,o+c),e),e+=c}};function n(t){var n=r.length;if(n>=t)return;t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));const o=r;r=new Uint8Array(t),e>0&&r.set(o.subarray(0,e),0)}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var i=function(t,e,r,n,i=o(512),a=new Uint8Array(256),f=new Int32Array(5003),l=new Int32Array(5003)){const u=f.length,s=Math.max(2,n);a.fill(0),l.fill(0),f.fill(-1);let w=0,y=0;const h=s+1,b=h;let g=!1,B=b,m=(1<<B)-1;const p=1<<h-1,A=p+1;let d=p+2,v=0,M=r[0],U=0;for(let o=u;o<65536;o*=2)++U;U=8-U,i.writeByte(s),x(p);const k=r.length;for(let o=1;o<k;o++)t:{const t=r[o],e=(t<<12)+M;let n=t<<U^M;if(f[n]===e){M=l[n];break t}const c=0===n?1:u-n;for(;f[n]>=0;)if(n-=c,n<0&&(n+=u),f[n]===e){M=l[n];break t}x(M),M=t,d<4096?(l[n]=d++,f[n]=e):(f.fill(-1),d=p+2,g=!0,x(p))}return x(M),x(A),i.writeByte(0),i.bytesView();function x(t){for(w&=c[y],y>0?w|=t<<y:w=t,y+=B;y>=8;)a[v++]=255&w,v>=254&&(i.writeByte(v),i.writeBytesView(a,0,v),v=0),w>>=8,y-=8;if((d>m||g)&&(g?(B=b,m=(1<<B)-1,g=!1):(++B,m=12===B?1<<B:(1<<B)-1)),t==A){for(;y>0;)a[v++]=255&w,v>=254&&(i.writeByte(v),i.writeBytesView(a,0,v),v=0),w>>=8,y-=8;v>0&&(i.writeByte(v),i.writeBytesView(a,0,v),v=0)}}};function a(t,e,r){return t<<8&63488|e<<2&992|r>>3}function f(t,e,r,n){return t>>4|240&e|(240&r)<<4|(240&n)<<8}function l(t,e,r){return t>>4<<8|240&e|r>>4}function u(t,e,r){return t<e?e:t>r?r:t}function s(t){return t*t}function w(t,e,r){var n=0,o=1e100;const c=t[e],i=c.cnt,a=c.ac,f=c.rc,l=c.gc,u=c.bc;for(var w=c.fw;0!=w;w=t[w].fw){const e=t[w],c=e.cnt,h=i*c/(i+c);if(!(h>=o)){var y=0;r&&(y+=h*s(e.ac-a))>=o||(y+=h*s(e.rc-f))>=o||(y+=h*s(e.gc-l))>=o||(y+=h*s(e.bc-u))>=o||(o=y,n=w)}}c.err=o,c.nn=n}function y(t,e,r={}){const{format:n="rgb565",clearAlpha:o=!0,clearAlphaColor:c=0,clearAlphaThreshold:i=0,oneBitAlpha:y=!1}=r;if(!t||!t.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(t instanceof Uint8Array)&&!(t instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const b=new Uint32Array(t.buffer);let g=!1!==r.useSqrt;const B="rgba4444"===n,m=function(t,e){const r=new Array("rgb444"===e?4096:65536),n=t.length;if("rgba4444"===e)for(let o=0;o<n;++o){const e=t[o],n=e>>24&255,c=e>>16&255,i=e>>8&255,a=255&e,l=f(a,i,c,n);let u=l in r?r[l]:r[l]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};u.rc+=a,u.gc+=i,u.bc+=c,u.ac+=n,u.cnt++}else if("rgb444"===e)for(let o=0;o<n;++o){const e=t[o],n=e>>16&255,c=e>>8&255,i=255&e,a=l(i,c,n);let f=a in r?r[a]:r[a]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};f.rc+=i,f.gc+=c,f.bc+=n,f.cnt++}else for(let o=0;o<n;++o){const e=t[o],n=e>>16&255,c=e>>8&255,i=255&e,f=a(i,c,n);let l=f in r?r[f]:r[f]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=i,l.gc+=c,l.bc+=n,l.cnt++}return r}(b,n),p=m.length,A=p-1,d=new Uint32Array(p+1);for(var v=0,M=0;M<p;++M){const t=m[M];if(null!=t){var U=1/t.cnt;B&&(t.ac*=U),t.rc*=U,t.gc*=U,t.bc*=U,m[v++]=t}}s(e)/v<.022&&(g=!1);var k,x,C;for(M=0;M<v-1;++M)m[M].fw=M+1,m[M+1].bk=M,g&&(m[M].cnt=Math.sqrt(m[M].cnt));for(g&&(m[M].cnt=Math.sqrt(m[M].cnt)),M=0;M<v;++M){w(m,M,!1);var E=m[M].err;for(x=++d[0];x>1&&!(m[k=d[C=x>>1]].err<=E);x=C)d[x]=k;d[x]=M}var q=v-e;for(M=0;M<q;){for(var I;;){var V=d[1];if((I=m[V]).tm>=I.mtm&&m[I.nn].mtm<=I.tm)break;I.mtm==A?V=d[1]=d[d[0]--]:(w(m,V,!1),I.tm=M);E=m[V].err;for(x=1;(C=x+x)<=d[0]&&(C<d[0]&&m[d[C]].err>m[d[C+1]].err&&C++,!(E<=m[k=d[C]].err));x=C)d[x]=k;d[x]=V}var G=m[I.nn],z=I.cnt,_=G.cnt;U=1/(z+_);B&&(I.ac=U*(z*I.ac+_*G.ac)),I.rc=U*(z*I.rc+_*G.rc),I.gc=U*(z*I.gc+_*G.gc),I.bc=U*(z*I.bc+_*G.bc),I.cnt+=G.cnt,I.mtm=++M,m[G.bk].fw=G.fw,m[G.fw].bk=G.bk,G.mtm=A}let P=[];var R=0;for(M=0;;++R){let t=u(Math.round(m[M].rc),0,255),e=u(Math.round(m[M].gc),0,255),r=u(Math.round(m[M].bc),0,255),n=255;if(B){if(n=u(Math.round(m[M].ac),0,255),y){n=n<=("number"===typeof y?y:127)?0:255}o&&n<=i&&(t=e=r=c,n=0)}const a=B?[t,e,r,n]:[t,e,r];if(h(P,a)||P.push(a),0==(M=m[M].fw))break}return P}function h(t,e){for(let r=0;r<t.length;r++){const n=t[r];let o=n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2],c=!(n.length>=4&&e.length>=4)||n[3]===e[3];if(o&&c)return!0}return!1}function b(t,e){var r,n=0;for(r=0;r<t.length;r++){const o=t[r]-e[r];n+=o*o}return n}function g(t,e){return e>1?Math.round(t/e)*e:t}function B(t,{roundRGB:e=5,roundAlpha:r=10,oneBitAlpha:n=null}={}){const o=new Uint32Array(t.buffer);for(let c=0;c<o.length;c++){const t=o[c];let i=t>>24&255,a=t>>16&255,f=t>>8&255,l=255&t;if(i=g(i,r),n){i=i<=("number"===typeof n?n:127)?0:255}l=g(l,e),f=g(f,e),a=g(a,e),o[c]=i<<24|a<<16|f<<8|l<<0}}function m(t,e,r="rgb565"){if(!t||!t.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(t instanceof Uint8Array)&&!(t instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(e.length>256)throw new Error("applyPalette() only works with 256 colors or less");const n=new Uint32Array(t.buffer),o=n.length,c="rgb444"===r?4096:65536,i=new Uint8Array(o),u=new Array(c);if("rgba4444"===r)for(let a=0;a<o;a++){const t=n[a],r=t>>24&255,o=t>>16&255,c=t>>8&255,l=255&t,s=f(l,c,o,r),w=s in u?u[s]:u[s]=p(l,c,o,r,e);i[a]=w}else{const t="rgb444"===r?l:a;for(let r=0;r<o;r++){const o=n[r],c=o>>16&255,a=o>>8&255,f=255&o,l=t(f,a,c),s=l in u?u[l]:u[l]=A(f,a,c,e);i[r]=s}}return i}function p(t,e,r,n,o){let c=0,i=1e100;for(let a=0;a<o.length;a++){const f=o[a];let l=v(f[3]-n);if(l>i)continue;if(l+=v(f[0]-t),l>i)continue;if(l+=v(f[1]-e),l>i)continue;l+=v(f[2]-r),l>i||(i=l,c=a)}return c}function A(t,e,r,n){let o=0,c=1e100;for(let i=0;i<n.length;i++){const a=n[i];let f=v(a[0]-t);if(f>c)continue;if(f+=v(a[1]-e),f>c)continue;f+=v(a[2]-r),f>c||(c=f,o=i)}return o}function d(t,e,r=5){if(!t.length||!e.length)return;const n=t.map((t=>t.slice(0,3))),o=r*r,c=t[0].length;for(let i=0;i<e.length;i++){let r=e[i];r=r.length<c?[r[0],r[1],r[2],255]:r.length>c?r.slice(0,3):r.slice();const a=U(n,r.slice(0,3),b),f=a[0],l=a[1];l>0&&l<=o&&(t[f]=r)}}function v(t){return t*t}function M(t,e,r=b){let n=1/0,o=-1;for(let c=0;c<t.length;c++){const i=r(e,t[c]);i<n&&(n=i,o=c)}return o}function U(t,e,r=b){let n=1/0,o=-1;for(let c=0;c<t.length;c++){const i=r(e,t[c]);i<n&&(n=i,o=c)}return[o,n]}function k(t,e,r=b){return t[M(t,e,r)]}function x(t={}){const{initialCapacity:e=4096,auto:r=!0}=t,c=o(e),a=new Uint8Array(256),f=new Int32Array(5003),l=new Int32Array(5003);let u=!1;return{reset(){c.reset(),u=!1},finish(){c.writeByte(n)},bytes:()=>c.bytes(),bytesView:()=>c.bytesView(),get buffer(){return c.buffer},get stream(){return c},writeHeader:s,writeFrame(t,e,n,o={}){const{transparent:w=!1,transparentIndex:y=0,delay:h=0,palette:b=null,repeat:g=0,colorDepth:B=8,dispose:m=-1}=o;let p=!1;if(r?u||(p=!0,s(),u=!0):p=Boolean(o.first),e=Math.max(0,Math.floor(e)),n=Math.max(0,Math.floor(n)),p){if(!b)throw new Error("First frame must include a { palette } option");!function(t,e,r,n,o=8){const c=1,i=0,a=I(n.length)-1,f=c<<7|o-1<<4|i<<3|a,l=0,u=0;E(t,e),E(t,r),t.writeBytes([f,l,u])}(c,e,n,b,B),C(c,b),g>=0&&function(t,e){t.writeByte(33),t.writeByte(255),t.writeByte(11),q(t,"NETSCAPE2.0"),t.writeByte(3),t.writeByte(1),E(t,e),t.writeByte(0)}(c,g)}const A=Math.round(h/10);!function(t,e,r,n,o){t.writeByte(33),t.writeByte(249),t.writeByte(4),o<0&&(o=0,n=!1);var c,i;n?(c=1,i=2):(c=0,i=0);e>=0&&(i=7&e);i<<=2;const a=0;t.writeByte(0|i|a|c),E(t,r),t.writeByte(o||0),t.writeByte(0)}(c,m,A,w,y);const d=Boolean(b)&&!p;!function(t,e,r,n){if(t.writeByte(44),E(t,0),E(t,0),E(t,e),E(t,r),n){const e=0,r=0,o=I(n.length)-1;t.writeByte(128|e|r|0|o)}else t.writeByte(0)}(c,e,n,d?b:null),d&&C(c,b),function(t,e,r,n,o=8,c,a,f){i(r,n,e,o,t,c,a,f)}(c,t,e,n,B,a,f,l)}};function s(){q(c,"GIF89a")}}function C(t,e){const r=1<<I(e.length);for(let n=0;n<r;n++){let r=[0,0,0];n<e.length&&(r=e[n]),t.writeByte(r[0]),t.writeByte(r[1]),t.writeByte(r[2])}}function E(t,e){t.writeByte(255&e),t.writeByte(e>>8&255)}function q(t,e){for(var r=0;r<e.length;r++)t.writeByte(e.charCodeAt(r))}function I(t){return Math.max(Math.ceil(Math.log2(t)),1)}var V=x}}]);