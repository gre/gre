(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{8749:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(5893),i=r(5988),o=r(7294),s=r(2116),u=r(9701);const c={position:"absolute",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"crosshair"};function a(){const e=200,t=200,{image:r}=(0,s.M4)("Select an Image",{image:{image:""},grid:{value:[4,2],step:1}}),{0:a,1:l}=(0,o.useState)(null),{0:h,1:d}=(0,o.useState)([]),{0:f,1:g}=(0,o.useState)(null),p=(0,o.useRef)(),b=(0,o.useRef)(),w=(0,u.ZP)({});(0,o.useEffect)((()=>{r&&(l(null),d([]),g(null),function(e){const t=new Image;return t.src=e,new Promise(((e,r)=>{t.onload=()=>e(t),t.onerror=e=>(console.error(e),r(e))}))}(r).then(l))}),[r]),(0,o.useEffect)((()=>{if(!a)return;const e=p.current,t=e.getContext("2d");t.drawImage(a,0,0,e.width,e.height),t.strokeStyle="red";for(const r of h){const n=Math.round(r[0]*e.width/a.width),i=Math.round(r[1]*e.height/a.height);t.beginPath(),t.arc(n,i,4,0,2*Math.PI),t.stroke()}}),[a,h,w.width,w.height]),(0,o.useEffect)((()=>{if(!a||!f)return;b.current.getContext("2d").drawImage(a,f[0],f[1],200,200,0,0,e,t)}),[a,f]);if(!w.height||!a)return(0,n.jsx)("div",{ref:w.observe,style:c});const v=a.width/a.height,m=w.width/w.height,y=Math.max(m,v);let k=v/y*.9*w.width,x=m/y*.9*w.height;k=Math.round(k),x=Math.round(x);const B={border:"1px solid black",width:k,height:x},R={position:"absolute",right:10,bottom:10,border:"1px solid black",width:e,height:t};return(0,n.jsxs)("div",{ref:w.observe,style:c,className:"jsx-827068738",children:[(0,n.jsx)(i.default,{id:"827068738",children:["html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto, Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue, sans-serif;}"]}),(0,n.jsx)("canvas",{style:B,ref:p,width:2*k,height:2*x,onClick:e=>{if(!a)return;if(f)return void g(null);const t=e.target.getBoundingClientRect(),r=e.clientX-t.x,n=e.clientY-t.y,i=r/t.width,o=n/t.height,s=Math.floor(i*a.width),u=Math.floor(o*a.height);g([s-100,u-100])},className:"jsx-827068738"}),(0,n.jsx)("canvas",{hidden:!f,style:R,ref:b,width:e,height:t,onClick:r=>{if(!a||!f)return;const n=r.target.getBoundingClientRect(),i=r.clientX-n.x,o=r.clientY-n.y,s=i/n.width,u=o/n.height,c=[Math.round(f[0]+s*e),Math.round(f[1]+u*t)];d((e=>e.concat([c]))),g(null)},className:"jsx-827068738"}),(0,n.jsx)("footer",{style:{padding:8,fontSize:10},className:"jsx-827068738",children:h.map((e=>e.join(","))).join(" ")})]})}},7721:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/playground/plotgridtool",function(){return r(8749)}])},9701:function(e,t,r){"use strict";var n=r(7294);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(e){var t=(0,n.useRef)(e);return t.current=e,t};t.ZP=function(e){var t=void 0===e?{}:e,r=t.useBorderBoxSize,s=t.breakpoints,u=t.updateOnBreakpointChange,c=t.shouldUpdate,a=t.onResize,l=t.polyfill,h=(0,n.useState)({currentBreakpoint:"",width:0,height:0}),d=h[0],f=h[1],g=(0,n.useRef)({}),p=(0,n.useRef)(),b=(0,n.useRef)(),w=(0,n.useRef)(!1),v=(0,n.useRef)(),m=o(a),y=o(c),k=(0,n.useCallback)((function(){b.current&&b.current.disconnect()}),[]),x=(0,n.useCallback)((function(e){e&&e!==v.current&&(k(),v.current=e),b.current&&v.current&&b.current.observe(v.current)}),[k]);return(0,n.useEffect)((function(){if((!("ResizeObserver"in window)||!("ResizeObserverEntry"in window))&&!l)return console.error("\ud83d\udca1 react-cool-dimensions: the browser doesn't support Resize Observer, please use polyfill: https://github.com/wellyshen/react-cool-dimensions#resizeobserver-polyfill"),function(){return null};var e=null;return b.current=new(l||ResizeObserver)((function(t){var n=t[0];e=requestAnimationFrame((function(){var e=n.contentBoxSize,t=n.borderBoxSize,i=n.contentRect,o=e;r&&(t?o=t:w.current||(console.warn("\ud83d\udca1 react-cool-dimensions: the browser doesn't support border-box size, fallback to content-box size. Please see: https://github.com/wellyshen/react-cool-dimensions#border-box-size-measurement"),w.current=!0));var c=(o=Array.isArray(o)?o[0]:o)?o.inlineSize:i.width,a=o?o.blockSize:i.height;if(c!==g.current.width||a!==g.current.height){g.current={width:c,height:a};var l={currentBreakpoint:"",width:c,height:a,entry:n,observe:x,unobserve:k};s?(l.currentBreakpoint=function(e,t){var r="",n=-1;return Object.keys(e).forEach((function(i){var o=e[i];t>=o&&o>n&&(r=i,n=o)})),r}(s,c),l.currentBreakpoint!==p.current&&(m.current&&m.current(l),p.current=l.currentBreakpoint)):m.current&&m.current(l);var h={currentBreakpoint:l.currentBreakpoint,width:c,height:a,entry:n};y.current&&!y.current(h)||(!y.current&&s&&u?f((function(e){return e.currentBreakpoint!==h.currentBreakpoint?h:e})):f(h))}}))})),x(),function(){k(),e&&cancelAnimationFrame(e)}}),[JSON.stringify(s),r,x,k,u]),i({},d,{observe:x,unobserve:k})}}},function(e){e.O(0,[9774,5988,2116,2888,179],(function(){return t=7721,e(e.s=t);var t}));var t=e.O();_N_E=t}]);