(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{3583:function(e,t,r){var n=r(7066);e.exports=function(e,t,r){t="number"===typeof t?t:1,r=r||": ";var o=e.split(/\r?\n/),a=String(o.length+t-1).length;return o.map((function(e,o){var i=o+t,s=String(i).length;return n(i,a-s)+r+e})).join("\n")}},3668:function(e){e.exports=function(e){return atob(e)}},746:function(e,t){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1)&&!!e},t.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var n=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,o=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--o;e[t]=n<<o&255}}(n),t.reverse=function(e){return n[255&e]<<24|n[e>>>8&255]<<16|n[e>>>16&255]<<8|n[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},6239:function(e,t,r){"use strict";var n=r(5081);function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new o;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var a=0;a<r.length;++a){var i=r[a];if("array"===i||"object"===typeof i&&i.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if("index"===i){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[a]);t.argTypes[a]="offset",t.offsetArgs.push({array:i.array,offset:i.offset}),t.offsetArgIndex.push(a)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t)}},1984:function(e,t,r){"use strict";var n=r(8706);function o(e,t,r){var n,o,a=e.length,i=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],c=0,f=0;for(n=0;n<a;++n)l.push(["i",n,"=0"].join(""));for(o=0;o<i;++o)for(n=0;n<a;++n)f=c,c=e[n],0===n?l.push(["d",o,"s",n,"=t",o,"p",c].join("")):l.push(["d",o,"s",n,"=(t",o,"p",c,"-s",f,"*t",o,"p",f,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=a-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<a;++n){for(f=c,c=e[n],o=0;o<i;++o)u.push(["p",o,"+=d",o,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function a(e,t,r){for(var n=e.body,o=[],a=[],i=0;i<e.args.length;++i){var s=e.args[i];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(i);switch(t.argTypes[i]){case"offset":var f=t.offsetArgIndex.indexOf(i);c=t.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var d="l"+i,h="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(o.push(["var ",d,"=",h,".get(",l,")"].join("")),n=n.replace(u,d),a.push([h,".set(",l,",",d,")"].join(""))):n=n.replace(u,[h,".get(",l,")"].join("")):n=n.replace(u,[h,"[",l,"]"].join("")):"generic"===r[c]?(o.push(["var ",d,"=",h,".get(",l,")"].join("")),n=n.replace(u,d),s.lvalue&&a.push([h,".set(",l,",",d,")"].join(""))):(o.push(["var ",d,"=",h,"[",l,"]"].join("")),n=n.replace(u,d),s.lvalue&&a.push([h,"[",l,"]=",d].join("")));else{for(var p=[s.name],g=[l],_=0;_<Math.abs(t.arrayBlockIndices[c]);_++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(_+1)+"*t"+c+"b"+_);if(u=new RegExp(p.join(""),"g"),l=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[h,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(i));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[o.join("\n"),n,a.join("\n")].join("\n").trim()}function i(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var o=e[n],a=o.match(/\d+/);a=a?a[0]:"",0===o.charAt(0)?t[n]="u"+o.charAt(1)+a:t[n]=o.charAt(0)+a,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}e.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)u[l]=t[2*l],s[l]=t[2*l+1];var c=[],f=[],d=[],h=[],p=[];for(l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(d.push(0),h.push(r),c.push(r),f.push(r+e.arrayBlockIndices[l])):(d.push(e.arrayBlockIndices[l]),h.push(e.arrayBlockIndices[l]+r),c.push(0),f.push(e.arrayBlockIndices[l]));for(var g=[],_=0;_<s[l].length;_++)d[l]<=s[l][_]&&s[l][_]<h[l]&&g.push(s[l][_]-d[l]);p.push(g)}var b=["SS"],y=["'use strict'"],E=[];for(_=0;_<r;++_)E.push(["s",_,"=SS[",_,"]"].join(""));for(l=0;l<e.arrayArgs.length;++l){b.push("a"+l),b.push("t"+l),b.push("p"+l);for(_=0;_<r;++_)E.push(["t",l,"p",_,"=t",l,"[",d[l]+_,"]"].join(""));for(_=0;_<Math.abs(e.arrayBlockIndices[l]);++_)E.push(["t",l,"b",_,"=t",l,"[",c[l]+_,"]"].join(""))}for(l=0;l<e.scalarArgs.length;++l)b.push("Y"+l);if(e.shapeArgs.length>0&&E.push("shape=SS.slice(0)"),e.indexArgs.length>0){var m=new Array(r);for(l=0;l<r;++l)m[l]="0";E.push(["index=[",m.join(","),"]"].join(""))}for(l=0;l<e.offsetArgs.length;++l){var v=e.offsetArgs[l],T=[];for(_=0;_<v.offset.length;++_)0!==v.offset[_]&&(1===v.offset[_]?T.push(["t",v.array,"p",_].join("")):T.push([v.offset[_],"*t",v.array,"p",_].join("")));0===T.length?E.push("q"+l+"=0"):E.push(["q",l,"=",T.join("+")].join(""))}var A=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((E=E.concat(A)).length>0&&y.push("var "+E.join(",")),l=0;l<e.arrayArgs.length;++l)y.push("p"+l+"|=0");e.pre.body.length>3&&y.push(a(e.pre,e,u));var R=a(e.body,e,u),w=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(p);w<r?y.push(function(e,t,r,n){for(var a=t.length,i=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<i;++c)l.push(["var offset",c,"=p",c].join(""));for(c=e;c<a;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<i;++c){for(var f=["offset"+c],d=e;d<a;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}for(l.push(o(t,r,n)),c=e;c<a;++c)l.push("}");return l.join("\n")}(w,p[0],e,R)):y.push(o(p[0],e,R)),e.post.body.length>3&&y.push(a(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var x=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",w,i(u)].join("");return new Function(["function ",x,"(",b.join(","),"){",y.join("\n"),"} return ",x].join(""))()}},5081:function(e,t,r){"use strict";var n=r(1984);e.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],o=e.funcName+"_cwise_thunk";t.push(["return function ",o,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],i=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),i.push("t"+f),i.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",i.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e))}},6841:function(e){"use strict";function t(e,r,n){var o=0|e[n];if(o<=0)return[];var a,i=new Array(o);if(n===e.length-1)for(a=0;a<o;++a)i[a]=r;else for(a=0;a<o;++a)i[a]=t(e,r,n+1);return i}e.exports=function(e,r){switch("undefined"===typeof r&&(r=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,r);break;case"object":if("number"===typeof e.length)return t(e,r,0)}return[]}},7738:function(e){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},4488:function(e,t,r){var n=r(7738);e.exports=function(e){return n[e]}},4779:function(e,t,r){var n=r(8975).sprintf,o=r(4488),a=r(6973),i=r(3583);e.exports=function(e,t,r){"use strict";var s=a(t)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===o.FRAGMENT_SHADER?"fragment":"vertex");for(var l=n("Error compiling %s shader %s:\n",u,s),c=n("%s%s",l,e),f=e.split("\n"),d={},h=0;h<f.length;h++){var p=f[h];if(""!==p&&"\0"!==p){var g=parseInt(p.split(":")[2]);if(isNaN(g))throw new Error(n("Could not parse error: %s",p));d[g]=p}}var _=i(t).split("\n");for(h=0;h<_.length;h++)if(d[h+3]||d[h+2]||d[h+1]){var b=_[h];if(l+=b+"\n",d[h+1]){var y=d[h+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),l+=n("^^^ %s\n\n",y)}}return{long:l.trim(),short:c.trim()}}},7545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),o=u(r(5697)),a=u(r(1143)),i=u(r(8574)),s=u(r(4988));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g={onContextCreate:o.default.func.isRequired,onContextFailure:o.default.func.isRequired,onContextLost:o.default.func.isRequired,onContextRestored:o.default.func.isRequired,webglContextAttributes:o.default.object,width:o.default.number.isRequired,height:o.default.number.isRequired,style:o.default.object,pixelRatio:o.default.number,version:o.default.string};class _ extends n.Component{render(){const{error:e}=this.props;let t=String(e.rawError||e.message||e),r=String(e.longMessage||e.rawError||"");return n.default.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,padding:"1em",background:"#a00",color:"#fff",fontSize:"12px",lineHeight:"1.2em",fontStyle:"normal",fontWeight:"normal",fontFamily:"monospace",overflow:"auto"}},n.default.createElement("div",{style:{fontWeight:"bold",marginBottom:"1em"}},t),n.default.createElement("div",{style:{whiteSpace:"pre"}},r))}}class b extends n.Component{constructor(...e){super(...e),p(this,"state",{error:null}),p(this,"webglContextAttributes",void 0),p(this,"canvas",void 0),p(this,"gl",void 0),p(this,"_onContextLost",(e=>{e.preventDefault(),this.gl=null,this.props.onContextLost()})),p(this,"_onContextRestored",(()=>{this.gl=this._createContext(),this.props.onContextRestored(this.gl)})),p(this,"onRef",(e=>{this.canvas=e})),p(this,"debugError",null),p(this,"afterDraw",null)}componentDidMount(){const{onContextCreate:e,onContextFailure:t}=this.props,r=this._createContext();if(r){this.gl=r,e(r);const{canvas:t}=this;(0,a.default)(t,"canvas is not settled in GLViewDOM#componentDidMount"),t.addEventListener("webglcontextlost",this._onContextLost),t.addEventListener("webglcontextrestored",this._onContextRestored)}else t(new Error("no-webgl-context"))}componentWillUnmount(){this.gl&&((0,s.default)(this.gl),this.gl=null);const{canvas:e}=this;e&&(e.removeEventListener("webglcontextlost",this._onContextLost),e.removeEventListener("webglcontextrestored",this._onContextRestored))}render(){const{error:e}=this.state;let t=this.props,{width:r,height:o,pixelRatio:a,style:i,debug:s,version:u}=t,l=h(t,["width","height","pixelRatio","style","debug","version"]);a||(a=Number("object"===typeof window&&window.devicePixelRatio||1));for(let n in g)l.hasOwnProperty(n)&&delete l[n];return n.default.createElement("span",{style:d(d({position:"relative"},i),{},{display:"inline-block",width:r,height:o})},n.default.createElement("canvas",c({ref:this.onRef,style:{width:r,height:o},width:r*a,height:o*a},l)),e?n.default.createElement(_,{error:e}):null)}_createContext(){const{webglContextAttributes:e,debug:t,version:r}=this.props,n=(0,i.default)(this.canvas,t?d(d({},e),{},{preserveDrawingBuffer:!0}):e,r||"auto");return this.webglContextAttributes=e||{},n}captureAsDataURL(...e){return this.webglContextAttributes.preserveDrawingBuffer||console.warn("Surface#captureAsDataURL is likely to not work if you don't define webglContextAttributes={{ preserveDrawingBuffer: true }}"),(0,a.default)(this.canvas,"canvas is no longer available"),this.canvas.toDataURL(...e)}captureAsBlob(...e){return this.webglContextAttributes.preserveDrawingBuffer||console.warn("Surface#captureAsBlob is likely to not work if you don't define webglContextAttributes={{ preserveDrawingBuffer: true }}"),Promise.resolve().then((()=>new Promise(((t,r)=>this.canvas?this.canvas.toBlob(t,...e):r(new Error("canvas is no longer available"))))))}}t.default=b,p(b,"propTypes",g)},8574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(e,t,r)=>{let n;return"webgl2"!==r&&"auto"!==r||(n=e.getContext("webgl2",t)),n||"webgl"!==r&&"auto"!==r||(n=e.getContext("webgl",t)||e.getContext("webgl-experimental",t)||e.getContext("experimental-webgl",t)),n};t.default=r},7250:function(e,t,r){"use strict";t.T=void 0;var n=r(3224),o=i(r(4087)),a=i(r(7545));function i(e){return e&&e.__esModule?e:{default:e}}r(5888);const s=(0,n.createSurface)({GLView:a.default,RenderLessElement:"span",mapRenderableContent:e=>e instanceof Element?e.firstElementChild:null,requestFrame:o.default,cancelFrame:o.default.cancel});t.T=s},4988:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>{const t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}},9334:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(1143)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),a=c(r(5697)),i=c(r(4471)),s=c(r(5337)),u=c(r(1662));function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends o.Component{constructor(...e){super(...e),f(this,"id",(0,u.default)()),f(this,"context",void 0),f(this,"dependents",[]),f(this,"glNode",null),f(this,"glBusRootNode",void 0),f(this,"onRef",(e=>{this.glBusRootNode=e})),f(this,"redraw",(()=>{this.dependents.forEach((e=>e.redraw()))})),f(this,"_draw",(()=>{}))}componentDidMount(){const{uniform:e,index:t}=this.props;if(e){const{glParent:r}=this.context;(0,n.default)(r instanceof i.default,'a <Bus uniform=".." /> needs to be inside a Node'),r._addUniformBus(this,e,t)}this.redraw()}componentWillUnmount(){const{uniform:e,index:t}=this.props;if(e){const{glParent:r}=this.context;(0,n.default)(r instanceof i.default,'a <Bus uniform=".." /> needs to be inside a Node'),r._removeUniformBus(this,e,t)}}componentDidUpdate({uniform:e,index:t}){const{uniform:r,index:o}=this.props;if(r&&(r!==e||o!==t)){const{glParent:a}=this.context;(0,n.default)(a instanceof i.default,'a <Bus uniform=".." /> needs to be inside a Node'),e&&a._removeUniformBus(this,e,t),a._addUniformBus(this,r,o)}this.redraw()}getChildContext(){return{glParent:this}}_addGLNodeChild(e){this.glNode=e,this.context.glParent.redraw()}_removeGLNodeChild(e){this.glNode=null}_addDependent(e){-1===this.dependents.indexOf(e)&&((0,s.default)(this,e),this.dependents.push(e))}_removeDependent(e){const t=this.dependents.indexOf(e);-1!==t&&this.dependents.splice(t,1)}getGLRenderableNode(){return this.glNode}getGLRenderableContent(){const{mapRenderableContent:e}=this.context.glSurface,{glBusRootNode:t}=this;return t&&e?e(t):null}getGLName(){return`Bus(${this.glNode?this.glNode.getGLName():String(this.getGLRenderableContent())})`}getGLShortName(){const e=this.getGLRenderableContent(),t=String(e&&e.constructor&&e.constructor.name||e);return`Bus(${this.glNode?this.glNode.getGLShortName():t})`}capture(e,t,r,o){return(0,n.default)(this.glNode,"Bus does not contain any Node"),this.glNode.capture(e,t,r,o)}_onContextLost(){const{glNode:e}=this;e&&e._onContextLost()}_onContextRestored(e){const{glNode:t}=this;t&&t._onContextRestored(e)}render(){const{children:e}=this.props,{glSurface:{RenderLessElement:t,mapRenderableContent:r}}=this.context;return o.default.createElement(t,{ref:r?this.onRef:void 0},"function"===typeof e?e(this.redraw):e)}}t.default=d,f(d,"defaultProps",{index:0}),f(d,"contextTypes",{glParent:a.default.object.isRequired,glSurface:a.default.object.isRequired}),f(d,"childContextTypes",{glParent:a.default.object.isRequired})},5426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,...t){let r="";for(let n=0;n<e.length;n++)r+=(0===n?"":t[n-1])+e[n];return r},t.GLSLSymbol=void 0;t.GLSLSymbol="GLSL"},8214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),o=i(r(4471)),a=i(r(1844));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends n.Component{constructor(...e){super(...e),c(this,"_node",void 0),c(this,"_onRef",(e=>{this._node=e}))}getNodeRef(){return this._node}render(){const e=this.props,{children:t}=e,r=l(e,["children"]);return n.default.createElement(o.default,u({},r,{ref:this._onRef,shader:a.default,blendFunc:{src:"one",dst:"one minus src alpha"},uniformsOptions:{t:{interpolation:"linear"}},uniforms:{t:t}}))}}var d=f;t.default=d},356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),o=i(r(4471)),a=i(r(1844));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends n.Component{constructor(...e){super(...e),c(this,"_node",void 0),c(this,"_onRef",(e=>{this._node=e}))}getNodeRef(){return this._node}render(){const e=this.props,{children:t}=e,r=l(e,["children"]);return n.default.createElement(o.default,u({},r,{ref:this._onRef,shader:a.default,blendFunc:{src:"one",dst:"one minus src alpha"},uniformsOptions:{t:{interpolation:"nearest"}},uniforms:{t:t}}))}}var d=f;t.default=d},4471:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(r(1143)),o=p(r(7294)),a=g(r(5697)),i=g(r(316)),s=g(r(2861)),u=g(r(1139)),l=g(r(9334)),c=p(r(8554)),f=g(r(5337)),d=g(r(1662));function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E={zero:"ZERO",one:"ONE","src color":"SRC_COLOR","one minus src color":"ONE_MINUS_SRC_COLOR","src alpha":"SRC_ALPHA","one minus src alpha":"ONE_MINUS_SRC_ALPHA","dst color":"DST_COLOR","one minus dst color":"ONE_MINUS_DST_COLOR","dst alpha":"DST_ALPHA","one minus dst alpha":"ONE_MINUS_DST_ALPHA","constant color":"CONSTANT_COLOR","one minus constant color":"ONE_MINUS_CONSTANT_COLOR","constant alpha":"CONSTANT_ALPHA","one minus constant alpha":"ONE_MINUS_CONSTANT_ALPHA","src alpha saturate":"SRC_ALPHA_SATURATE"},m=({width:e,height:t},{glSizable:r})=>{if(e&&t)return[e,t];const[n,o]=r.getGLSize();return[e||n,t||o]},v=(e,t)=>{if(t in e)return e[t];if(t in E){const r=E[t];if(r in e)return e[r]}console.warn("Invalid blendFunc. Got:",t)},T=(e,t)=>{switch(t){case"clamp to edge":return e.CLAMP_TO_EDGE;case"repeat":return e.REPEAT;case"mirrored repeat":return e.MIRRORED_REPEAT;default:return console.warn("Invalid wrap. Got:",t),e.CLAMP_TO_EDGE}},A=(e,t,r)=>{var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);var o=e.createTexture();if(!o)throw new Error("createTexture returned null");return e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),{handle:n,color:o,bind:()=>{e.bindFramebuffer(e.FRAMEBUFFER,n),e.viewport(0,0,t,r)},syncSize:(n,a)=>{n===t&&a===r||(t=n,r=a,e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,a,0,e.RGBA,e.UNSIGNED_BYTE,null))},dispose:()=>{e.deleteFramebuffer(n),e.deleteTexture(o)}}},R={interpolation:"linear",wrap:["clamp to edge","clamp to edge"]},w=(e,t)=>{const r=b(b({},R),t);let n,o,a=((e,t)=>{switch(t){case"linear":return e.LINEAR;case"nearest":return e.NEAREST;default:return console.warn("Invalid interpolation. Got:",t),e.LINEAR}})(e,r.interpolation);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),Array.isArray(r.wrap)?2!==r.wrap.length?(console.warn("textureOptions wrap: should be an array of 2 values. Got:",r.wrap),n=o=e.CLAMP_TO_EDGE):(n=T(e,r.wrap[0]),o=T(e,r.wrap[1])):n=o=T(e,r.wrap),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o)},x={shader:a.default.object.isRequired,uniformsOptions:a.default.object,uniforms:a.default.object,ignoreUnusedUniforms:a.default.any,sync:a.default.bool,width:a.default.number,height:a.default.number,children:a.default.any,backbuffering:a.default.bool,blendFunc:a.default.object,clear:a.default.object,onDraw:a.default.func};class N extends o.Component{constructor(...e){super(...e),y(this,"drawProps",this.props),y(this,"context",void 0),y(this,"framebuffer",void 0),y(this,"backbuffer",void 0),y(this,"_needsRedraw",!1),y(this,"capturePixelsArray",void 0),y(this,"id",(0,d.default)()),y(this,"uniformsBus",{}),y(this,"dependencies",[]),y(this,"dependents",[]),y(this,"_resolveElement",((e,t,r)=>{if(!o.default.isValidElement(t)){if("function"!==typeof t)return;if(t=t(this.redraw),!o.default.isValidElement(t))return}return o.default.createElement(l.default,{key:e+(r?"."+r:""),uniform:e,index:r},t)})),y(this,"_renderUniformElement",(e=>{const{uniforms:t}=this.props;let r=t[e];return Array.isArray(r)?r.map(((t,r)=>this._resolveElement(e,t,r))):this._resolveElement(e,r,0)})),y(this,"redraw",(()=>{this._needsRedraw||(this._needsRedraw=!0,this.dependents.forEach((e=>e.redraw())))})),y(this,"flush",(()=>{this.context.glSurface._draw()})),y(this,"_latestShaderInfo",void 0),y(this,"_shader",void 0)}getChildContext(){return{glParent:this,glSizable:this}}componentDidMount(){const{glSurface:{gl:e}}=this.context;e&&this._prepareGLObjects(e),this.context.glParent._addGLNodeChild(this),this.redraw(),this.props.sync&&this.flush()}componentWillUnmount(){const{capturePixelsArray:e}=this;this._destroyGLObjects(),e&&i.default.freeUint8(e),this._needsRedraw=!1,this.context.glParent._removeGLNodeChild(this),this.dependencies.forEach((e=>e._removeDependent(this)))}_syncNextDrawProps(e,t){const r=m(e,t);this.framebuffer&&this.framebuffer.syncSize(...r),this.backbuffer&&this.backbuffer.syncSize(...r),(0,n.default)(e.backbuffering===this.drawProps.backbuffering,"Node backbuffering prop must not changed. (not yet supported)"),this.drawProps=e}render(){const{children:e,uniforms:t}=this.props,{glSurface:{RenderLessElement:r}}=this.context;return o.default.createElement(r,null,e,Object.keys(t).map(this._renderUniformElement))}componentDidUpdate(){this._syncNextDrawProps(this.props,this.context),this.redraw(),this.props.sync&&this.flush()}getGLShortName(){const{shader:e}=this.drawProps;return`Node(${(0,c.isShaderIdentifier)(e)?c.default.getShortName(e):"<inline>"})`}getGLName(){const{shader:e}=this.drawProps,t=(0,c.isShaderIdentifier)(e)?c.default.getName(e):"<inline>";return`Node#${this.id}(${t})`}getGLSize(){return m(this.drawProps,this.context)}getGLOutput(){const{framebuffer:e}=this;return(0,n.default)(e,"Node#getGLOutput: framebuffer is not defined. It cannot be called on a root Node"),e.color}getGLBackbufferOutput(){const{backbuffer:e}=this;return(0,n.default)(e,"Node#getGLBackbufferOutput: backbuffer is not defined. Make sure `backbuffering` prop is defined"),e.color}setDrawProps(e){const t=b(b({},this.drawProps),e);this._syncNextDrawProps(t,this.context),this.redraw(),t.sync&&this.flush()}capture(e,t,r,o){const[a,i]=this.getGLSize(),{gl:u}=this.context.glSurface;(0,n.default)(u,"gl is no longer available"),void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=a-e),void 0===o&&(o=i-t),(0,n.default)(e>=0&&e+r<=a&&t>=0&&t+o<=i,"capture(%s,%s,%s,%s): requested rectangle is out of bounds (%s,%s)",e,t,r,o,a,i);const l=r*o*4,c=this._captureAlloc(l);return this._bind(),u.readPixels(e,t,r,o,u.RGBA,u.UNSIGNED_BYTE,c),(0,s.default)(c,[o,r,4]).step(-1,1,1).transpose(1,0,2)}_destroyGLObjects(){const{glSurface:e}=this.context;if(e.glIsAvailable()){const{framebuffer:e,backbuffer:t,_shader:r}=this;r&&r.dispose(),e&&e.dispose(),t&&t.dispose()}delete this._shader,delete this.framebuffer,delete this.backbuffer}_prepareGLObjects(e){const[t,r]=this.getGLSize(),{glParent:o,glSurface:a}=this.context;if(o===a)(0,n.default)(!this.drawProps.backbuffering,"`backbuffering` is currently not supported for a Root Node. Try to wrap %s in a <LinearCopy> or <NearestCopy>.",this.getGLName());else{const n=A(e,t,r);if(this.framebuffer=n,this.drawProps.backbuffering){const n=A(e,t,r);this.backbuffer=n}}}_onContextLost(){this.dependencies.forEach((e=>e._onContextLost())),this._destroyGLObjects()}_onContextRestored(e){this._prepareGLObjects(e),this.dependencies.forEach((t=>t._onContextRestored(e))),this._needsRedraw=!0}_addGLNodeChild(e){}_removeGLNodeChild(e){}_addUniformBus(e,t,r){(this.uniformsBus[t]||(this.uniformsBus[t]=[]))[r]=e}_removeUniformBus(e,t,r){const n=this.uniformsBus[t]||(this.uniformsBus[t]=[]);n[r]===e&&(n[r]=null)}_addDependent(e){-1===this.dependents.indexOf(e)&&((0,f.default)(this,e),this.dependents.push(e))}_removeDependent(e){const t=this.dependents.indexOf(e);-1!==t&&this.dependents.splice(t,1)}_syncDependencies(e){const t=this.dependencies,r=e.filter((e=>-1===t.indexOf(e))),n=t.filter((t=>-1===e.indexOf(t)));return r.forEach((e=>e._addDependent(this))),n.forEach((e=>e._removeDependent(this))),this.dependencies=e,[r,n]}_bind(){this.framebuffer?this.framebuffer.bind():this.context.glSurface._bindRootNode()}_captureAlloc(e){let{capturePixelsArray:t}=this;t&&e!==t.length&&(i.default.freeUint8(t),t=null);const r=t||i.default.mallocUint8(e);return this.capturePixelsArray=r,r}_getShader(e){const{glSurface:t}=this.context,r=this.getGLName();if((0,n.default)(e,r+": shader prop must be provided"),(0,c.isShaderIdentifier)(e))return t._getShader(e);const o=(0,c.shaderDefinitionToShaderInfo)((0,c.ensureShaderDefinition)(e," in "+r),r),a=this._latestShaderInfo;let i=this._shader;return i&&a&&(0,c.shaderInfoEquals)(a,o)||(i&&(i.dispose(),delete this._shader),i=t._makeShader(o),this._latestShaderInfo=o,this._shader=i),i}_draw(){const{glSurface:e}=this.context,{gl:t}=e,r=e.getVisitors(),o=this.getGLName();if(!t||!this._needsRedraw)return void r.forEach((e=>e.onNodeDrawSkipped(this)));const{backbuffering:a,uniforms:i,uniformsOptions:s,shader:c,blendFunc:f,clear:d,onDraw:h,ignoreUnusedUniforms:p}=this.drawProps;if(!this.framebuffer){const{glSizable:e}=this.context,[t,r]=e.getGLSize(),[a,i]=this.getGLSize();(0,n.default)(a===t&&i===r,o+" is root but have overrided {width=%s,height=%s} which doesn't match Surface size {width=%s,height=%s}. Try to wrap your Node in a <NearestCopy> or <LinearCopy>",a,i,t,r)}const g=this._getShader(c);this._needsRedraw=!1;const{types:_}=g,b=[],y=[];let E=0;const m=Object.keys(_.uniforms),T=Object.keys(i),{uniformsBus:A}=this;for(let n in A)n in i||T.push(n);const R=new Map,x=(r,a,i)=>{let s,c,f=r;if("function"===typeof f&&(f=f(this.redraw)),f){if((e=>"Backbuffer"===e?(console.warn('Backbuffer is deprecated, use Uniform.Backbuffer instead: `import {Uniform} from "gl-react"`'),!0):e===u.default.Backbuffer)(f))this.drawProps.backbuffering||console.warn(`${o}, uniform ${i}: you must set \`backbuffering\` on Node when using Backbuffer`),c={glNode:this,glNodePickBackbuffer:!0};else if((e=>e&&"object"===typeof e&&"BackbufferFrom"===e.type)(f)){(0,n.default)("object"===typeof f,"invalid backbufferFromNode. Got: %s",f);let e=f.node;e instanceof l.default&&(e=e.getGLRenderableNode(),(0,n.default)(e,"backbufferFromNode(bus) but bus.getGLRenderableNode() is %s",e)),(0,n.default)(e instanceof N,"invalid backbufferFromNode(obj): obj must be an instanceof Node or Bus. Got: %s",f),e.drawProps.backbuffering||console.warn(`${o}, uniform ${i}: you must set \`backbuffering\` on the Node referenced in backbufferFrom(${e.getGLName()})`),c={glNode:e,glNodePickBackbuffer:!0}}else if(f instanceof N)s=f,c={glNode:f};else if(f instanceof l.default){const e=f.getGLRenderableNode();if(e)s=e,c={glNode:e};else{s=f;const e=f.getGLRenderableContent();e?f=e:(console.warn(`${o}, uniform ${i}: child is not renderable. Got:`,e),c={directTexture:null})}}}else void 0===f&&console.warn(`${o}, uniform '${i}' is undefined.If you explicitely want to clear a texture, set it to null.`);if(!c&&f){const{loader:t,input:r}=e._resolveTextureLoader(f);if(t){const e=t.get(r);if(e)t.update(r),c={directTexture:e.texture,directTextureSize:[e.width,e.height]};else{const e=t.load(r);y.push(e)}}else console.warn(`${o}, uniform ${i}: no loader found for value`,r,f)}s&&b.push(s);const d=c?a:null;return{getMetaInfo:()=>({initialObj:r,obj:f,dependency:s,textureOptions:d}),getSize:()=>{const e=[2,2];return c?"directTextureSize"in c?c.directTextureSize:c.glNode?c.glNode.getGLSize():e:e},prepare:()=>{const r=c&&(c.directTexture||c.glNode&&(c.glNodePickBackbuffer?c.glNode.getGLBackbufferOutput():c.glNode.getGLOutput()))||e.getEmptyTexture();if(R.has(r))return R.get(r);const n=E++;return t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,r),w(t,d),R.set(r,n),n}}},O=T.map((e=>{const t=_.uniforms[e];if(!t){return!0===p||p instanceof Array&&p.includes(e)||console.warn(`${o} uniform '${e}' is not declared, nor used, in your shader code`),{key:e,value:void 0}}const r=i[e];if(m.splice(m.indexOf(e),1),"sampler2D"===t){const n=A[e],{getMetaInfo:o,prepare:a}=x(n&&n[0]||r,s[e],e);return{key:e,type:t,getMetaInfo:o,prepare:a}}if(r===u.default.Resolution)return{key:e,type:t,value:this.getGLSize()};if((a=r)&&"object"===typeof a&&"TextureSize"===a.type){(0,n.default)(r&&"object"===typeof r,"unexpected textureSize object. Got: %s",r);const{getSize:a}=x(r.obj,null,e),i=a();i||console.warn(`${o}, uniform ${e}: texture size is undetermined`);const s=r.ratio?i?i[0]/i[1]:1:i||[0,0];return{key:e,type:t,value:s}}if(Array.isArray(t)&&"sampler2D"===t[0]){let n;const a=A[e],i=((e,t)=>{const r=[],n=Math.max(e.length,t.length);for(let o=0;o<n;o++)r[o]=t[o]||e[o];return r})(Array.isArray(r)?r:[],Array.isArray(a)?a:[]);i.length?i.length!==t.length?(console.warn(`${o}, uniform '${e}' should be an array of exactly ${t.length} textures (not ${i.length}).`),n=t.map((()=>null))):n=i:(console.warn(`${o}, uniform '${e}' should be an array of textures.`),n=t.map((()=>null)));const u=s[e],l=n.map(((t,r)=>x(t,u,e+"["+r+"]")));return{key:e,type:t,getMetaInfo:()=>l.reduce(((e,t)=>e.concat(t.getMetaInfo())),[]),prepare:()=>l.map((e=>e.prepare()))}}return void 0===r&&console.warn(`${o}, uniform '${e}' is undefined.`),{key:e,type:t,value:r};var a}));if(0!==m.length&&console.warn(o+": Missing uniforms: "+m.map((e=>`'${e}'`)).join(", ")+"\nall uniforms must be provided because implementations might share and reuse a Shader Program"),y.length>0)return Promise.all(y).then(this.redraw),void r.forEach((e=>e.onNodeDrawSkipped(this)));r.forEach((e=>e.onNodeDrawStart(this)));const[S,L]=this._syncDependencies(b);if(r.forEach((e=>e.onNodeSyncDeps(this,S,L))),a){const{backbuffer:e,framebuffer:t}=this;this.backbuffer=t,e&&(this.framebuffer=e)}if(this.dependencies.forEach((e=>e._draw())),r.forEach((e=>e.onNodeDraw(this,O))),g.bind(),this._bind(),O.forEach((e=>{const t=e.prepare?e.prepare():e.value;void 0!==t&&(g.uniforms[e.key]=t)})),f){const e=v(t,f.src),r=v(t,f.dst);e&&r&&t.blendFunc(e,r)}d&&(t.clearColor(...d.color),t.clear(t.COLOR_BUFFER_BIT)),t.drawArrays(t.TRIANGLES,0,3),h&&h(),r.forEach((e=>e.onNodeDrawEnd(this)))}}t.default=N,y(N,"propTypes",x),y(N,"defaultProps",{uniformsOptions:{},uniforms:{},blendFunc:{src:"src alpha",dst:"one minus src alpha"},clear:{color:[0,0,0,0]}}),y(N,"contextTypes",{glParent:a.default.object.isRequired,glSurface:a.default.object.isRequired,glSizable:a.default.object.isRequired}),y(N,"childContextTypes",{glParent:a.default.object.isRequired,glSizable:a.default.object.isRequired})},8554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShaderIdentifier=function(e){return"object"===typeof e&&!!e&&e.type===i&&"string"===typeof e.id},t.ensureShaderDefinition=h,t.shaderDefinitionToShaderInfo=b,t.shaderInfoEquals=function(e,t){return e.frag===t.frag&&e.vert===t.vert},t.default=void 0;var n=a(r(1143)),o=a(r(5426));function a(e){return e&&e.__esModule?e:{default:e}}const i="ShaderID",s={},u={},l={},c=(f=0,()=>(++f).toString());var f;const d={100:o.default`
attribute vec2 _p;
varying vec2 uv;
void main() {
gl_Position = vec4(_p,0.0,1.0);
uv = vec2(0.5, 0.5) * (_p+vec2(1.0, 1.0));
}`,"300 es":o.default`#version 300 es
in vec2 _p;
out vec2 uv;
void main() {
gl_Position = vec4(_p,0.0,1.0);
uv = vec2(0.5, 0.5) * (_p+vec2(1.0, 1.0));
}`};function h(e,t=""){return(0,n.default)(e&&"string"===typeof e.frag,"A `frag` GLSL code (string) is required"+t),e}const p="#version";function g(e){const t=e.indexOf("\n"),r=t>-1?e.slice(0,t):e;return r.startsWith(p)?r.slice(p.length+1):"100"}const _=(e,t)=>t?e+"\n#define SHADER_NAME "+t+"\n":e;function b({frag:e,vert:t},r){const n=g(e=e.trim());if(t){if(n!==g(t=t.trim()))throw new Error("GLSL shader vert and frag version must match")}else if(!(t=d[n]))throw new Error("gl-react: could not find static vertex shader for GLSL version '"+n+"'");return{frag:e=_(e,r),vert:t=_(t,r)}}var y=r.g.__glReactShaders=r.g.__glReactShaders||{create(e){const t={};return Object.keys(e).forEach((r=>{const n=h(e[r]," in Shaders.create({ "+r+": ... })"),o=c(),a=Object.freeze({type:i,id:o});s[o]=n,u[o]=r,t[r]=a;const f=b(n,r);l[o]=f})),t},getName:e=>(u[e.id]||"???")+`#${String(e.id)}`,getShortName:e=>u[e.id]||"???",get:e=>((0,n.default)(e.id in s,"Shader %s does not exist. Make sure you don't have gl-react dup issue: `npm ls gl-react`",e.id),l[e.id])};t.default=y},1139:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={Backbuffer:"_Backbuffer_",backbufferFrom:e=>({type:"BackbufferFrom",node:e}),Resolution:"_Resolution_",textureSize:e=>({type:"TextureSize",obj:e}),textureSizeRatio:e=>({type:"TextureSize",obj:e,ratio:!0})};t.default=r},8321:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{onSurfaceMount(e){}onSurfaceUnmount(e){}onSurfaceGLContextChange(e,t){}onSurfaceDrawSkipped(e){}onSurfaceDrawStart(e){}onSurfaceDrawError(e){return!1}onSurfaceDrawEnd(e){}onNodeDrawSkipped(e){}onNodeDrawStart(e){}onNodeSyncDeps(e,t,r){}onNodeDraw(e,t){}onNodeDrawEnd(e){}}},205:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(2928)),o=a(r(8321));function a(e){return e&&e.__esModule?e:{default:e}}const i=e=>Array.isArray(e)?e.reduce(((e,t)=>e.concat(i(t))),[]):[String(e.dependency&&e.dependency.getGLName()||e.initialObj)].concat(e.textureOptions?[e.textureOptions]:[]);class s extends o.default{constructor(...e){var t,r,n;super(...e),n=0,(r="groupNestedLvl")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}onSurfaceGLContextChange(e,t){t?(0,n.default)(e.getGLName()+" _context acquired_"):(0,n.default)(e.getGLName()+" _context lost_")}onSurfaceDrawSkipped(){}onSurfaceDrawStart(e){const[t,r]=e.getGLSize();console.groupCollapsed("Surface draw"),this.groupNestedLvl=1,(0,n.default)("_size_ `"+t+"`x`"+r+"`")}onSurfaceDrawError(e){for(console.error(e);this.groupNestedLvl>0;)console.groupEnd(),this.groupNestedLvl--;return!0}onSurfaceDrawEnd(){this.groupNestedLvl--,console.groupEnd()}onNodeDrawSkipped(e){(0,n.default)(e.getGLName()+" redraw _skipped_: "+(e.context.glSurface.gl?e._needsRedraw?"":"no need to redraw":"no gl context available!"))}onNodeDrawStart(e){this.groupNestedLvl++,console.group(e.getGLName())}onNodeSyncDeps(e,t,r){t.length&&console.log(e.getGLName()+" +deps "+t.map((e=>e.getGLName())).join(", ")),r.length&&console.log(e.getGLName()+" -deps "+t.map((e=>e.getGLName())).join(", "))}onNodeDraw(e,t){const{blendFunc:r,clear:o}=e.props;this.groupNestedLvl++,console.group("DRAW "+e.getGLName());const[a,s]=e.getGLSize();(0,n.default)("_size_ `"+a+"`x`"+s+"` _clear_ `"+JSON.stringify(o)+"` _blendFunc_ `"+JSON.stringify(r)+"`"),(0,n.default)("_"+t.length+" uniforms:_"),t.forEach((e=>{let{key:t,type:r,value:o,getMetaInfo:a}=e;r=String(r||"UNKNOWN");const s=void 0===o?"":Array.isArray(o)?"["+o.map((e=>"`"+String(e)+"`")).join(",")+"]":"`"+String(o)+"`";let u="";for(let n=r.length+t.length-18;n<0;n++)u+=" ";(0,n.default)(`${u}*${"UNKNOWN"===r?"[c='color:red']UNKNOWN[c]":r}* _${t}_ = ${s}`,...a?i(a()):[])}))}onNodeDrawEnd(){this.groupNestedLvl-=2,console.groupEnd(),console.groupEnd()}}t.default=s},4913:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let n=r.g.__glReactGlobalVisitor=r.g.__glReactGlobalVisitor||[];var o={add(e){n.push(e)},remove(e){const t=n.indexOf(e);-1!==t&&n.splice(t,1)},get:()=>n};t.default=o},3121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),a=(n=r(5697))&&n.__esModule?n:{default:n};function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=e=>{var t,r;return r=t=class extends o.Component{constructor(...e){super(...e),u(this,"context",void 0)}getGLSize(){const{props:{width:e,height:t},context:{glSizable:r}}=this;if(e&&t)return[e,t];const[n,o]=r.getGLSize();return[e||n,t||o]}getChildContext(){return{glSizable:this}}render(){const{onConnectSizeComponentRef:t}=this.props,[r,n]=this.getGLSize();return o.default.createElement(e,s({ref:t},this.props,{width:r,height:n}))}},u(t,"displayName",`connectSize(${e.displayName||e.name||"?"})`),u(t,"propTypes",{width:a.default.number,height:a.default.number}),u(t,"contextTypes",{glSizable:a.default.object.isRequired}),u(t,"childContextTypes",{glSizable:a.default.object.isRequired}),r};t.default=l},1844:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(5426));function o(e){return e&&e.__esModule?e:{default:e}}var a=o(r(8554)).default.create({copy:{frag:n.default`
precision highp float;
varying vec2 uv;
uniform sampler2D t;
void main(){
  gl_FragColor=texture2D(t,uv);
}`}}).copy;t.default=a},1596:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.list=void 0;var n=f(r(1143)),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(7294)),a=f(r(5697)),i=f(r(8057)),s=(f(r(9334)),f(r(8554))),u=f(r(4913)),l=r(1412);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={children:a.default.any.isRequired,style:a.default.any,preload:a.default.array,onLoad:a.default.func,onLoadError:a.default.func,onContextLost:a.default.func,onContextRestored:a.default.func,visitor:a.default.object};let g=0;const _=[];t.list=()=>_.slice(0);const b=Object.keys(p);t.default=({GLView:e,RenderLessElement:t,mapRenderableContent:r,requestFrame:c,cancelFrame:f})=>{var y,E;return E=y=class extends o.Component{constructor(...e){super(...e),h(this,"id",++g),h(this,"gl",void 0),h(this,"buffer",void 0),h(this,"loaderResolver",void 0),h(this,"glView",void 0),h(this,"root",void 0),h(this,"shaders",{}),h(this,"_preparingGL",[]),h(this,"_needsRedraw",!1),h(this,"state",{ready:!1,rebootId:0,debug:!1}),h(this,"RenderLessElement",t),h(this,"mapRenderableContent",r),h(this,"redraw",(()=>{this._needsRedraw=!0})),h(this,"flush",(()=>{this._draw()})),h(this,"_emptyTexture",void 0),h(this,"_onContextCreate",(e=>{this._prepareGL(e,(()=>{this.setState({ready:!0},(()=>{try{this._handleLoad()}catch(e){this._handleError(e)}}))}),this._handleError)})),h(this,"_onContextFailure",(e=>{this._handleError(e)})),h(this,"_onContextLost",(()=>{this.props.onContextLost&&this.props.onContextLost(),this._stopLoop(),this._destroyGL(),this.root&&this.root._onContextLost()})),h(this,"_onContextRestored",(e=>{this.root&&this.root._onContextRestored(e),this._prepareGL(e,this._handleRestoredSuccess,this._handleRestoredFailure)})),h(this,"_onRef",(e=>{this.glView=e})),h(this,"_handleError",(e=>{const{onLoadError:t}=this.props;t?t(e):console.error(e)})),h(this,"_handleRestoredFailure",(()=>{})),h(this,"_handleRestoredSuccess",(()=>{this.redraw(),this.flush(),this._startLoop(),this.props.onContextRestored&&this.props.onContextRestored()})),h(this,"_handleLoad",(()=>{this.root||console.warn(this.getGLName()+" children does not contain any discoverable Node");const{onLoad:e}=this.props;this.redraw(),this.flush(),this._startLoop(),e&&e()})),h(this,"_loopRaf",void 0)}getChildContext(){return{glParent:this,glSurface:this,glSizable:this}}componentDidMount(){_.push(this),this.getVisitors().forEach((e=>e.onSurfaceMount(this)))}componentWillUnmount(){this._stopLoop(),this._destroyGL();const e=_.indexOf(this);-1!==e&&_.splice(e,1),this.getVisitors().forEach((e=>e.onSurfaceUnmount(this)))}componentDidUpdate(){this.redraw()}render(){const{props:t,state:{ready:r,rebootId:n,debug:a}}=this,{children:i,style:s}=t,u={};return Object.keys(t).forEach((e=>{-1===b.indexOf(e)&&(u[e]=t[e])})),o.default.createElement(e,d({key:n,debug:a,ref:this._onRef,onContextCreate:this._onContextCreate,onContextFailure:this._onContextFailure,onContextLost:this._onContextLost,onContextRestored:this._onContextRestored,style:s},u),r?i:null)}rebootForDebug(){this._stopLoop(),this._destroyGL(),this.setState((({rebootId:e})=>({rebootId:e+1,ready:!1,debug:!0})))}getVisitors(){return u.default.get().concat(this.props.visitor||[])}getGLSize(){const{gl:e}=this;return[e?e.drawingBufferWidth:0,e?e.drawingBufferHeight:0]}getGLName(){return`Surface#${this.id}`}getGLShortName(){return"Surface"}captureAsDataURL(...t){const{glView:r}=this;return(0,n.default)(r,"GLView is mounted"),(0,n.default)(r.captureAsDataURL,"captureAsDataURL is not defined in %s",e.displayName||e.name),r.captureAsDataURL(...t)}captureAsBlob(...t){const{glView:r}=this;return(0,n.default)(r,"GLView is mounted"),(0,n.default)(r.captureAsBlob,"captureAsBlob is not defined in %s",e.displayName||e.name),r.captureAsBlob(...t)}capture(e,t,r,o){return(0,n.default)(this.root,"Surface#capture: surface is not yet ready or don't have any root Node"),this.root.capture(e,t,r,o)}glIsAvailable(){return!!this.gl}getEmptyTexture(){let{gl:e,_emptyTexture:t}=this;return(0,n.default)(e,"getEmptyTexture called while gl was not defined"),t||(this._emptyTexture=t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),t}_destroyGL(){const{gl:e}=this;if(e){this.gl=null,this._emptyTexture&&(e.deleteTexture(this._emptyTexture),this._emptyTexture=null),this.loaderResolver&&this.loaderResolver.dispose();for(let e in this.shaders)this.shaders[e].dispose();this.shaders={},e.deleteBuffer(this.buffer),this.getVisitors().map((e=>e.onSurfaceGLContextChange(this,null)))}}_prepareGL(e,t,r){this.gl=e,this.getVisitors().map((t=>t.onSurfaceGLContextChange(this,e))),this.loaderResolver=new l.LoaderResolver(e),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);const n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,4,4,-1]),e.STATIC_DRAW),this.buffer=n;const{preload:o}=this.props,a=[];(o||[]).forEach((e=>{if(!e)return void console.warn("Can't preload value",e);const{loader:t,input:r}=this._resolveTextureLoader(e);if(!t)return void console.warn("Can't preload input",e,r);t.get(r)||a.push(t.load(r))})),this._preparingGL=a,a.length>0?Promise.all(a).then(t,r):t()}_addGLNodeChild(e){(0,n.default)(!this.root,"Surface can only contains a single root. Got: %s",this.root&&this.root.getGLName()),this.root=e,e._addDependent(this),this.redraw()}_removeGLNodeChild(e){this.root=null,this.redraw()}_resolveTextureLoader(e){let t=e;return{loader:this.loaderResolver&&this.loaderResolver.resolve(t),input:t}}_makeShader({frag:e,vert:t},r){const{gl:o}=this;(0,n.default)(o,"gl is not available");const a=(0,i.default)(o,t,e);for(let n in a.attributes)a.attributes[n].pointer();return a}_getShader(e){const{shaders:t}=this;return t[e.id]||(t[e.id]=this._makeShader(s.default.get(e),s.default.getName(e)))}_bindRootNode(){const{gl:e}=this;(0,n.default)(e,"gl context not available"),e.bindFramebuffer(e.FRAMEBUFFER,null);const[t,r]=this.getGLSize();e.viewport(0,0,t,r)}_startLoop(){f(this._loopRaf);const e=()=>{this._loopRaf=c(e),this._needsRedraw&&this._draw()};this._loopRaf=c(e)}_stopLoop(){f(this._loopRaf)}_draw(){const{gl:e,root:t,glView:r}=this;(0,n.default)(r,"GLView is mounted");const o=this.getVisitors();if(e&&t&&this._needsRedraw){this._needsRedraw=!1,o.forEach((e=>e.onSurfaceDrawStart(this))),r.beforeDraw&&r.beforeDraw(e);try{t._draw()}catch(a){let e=!1;if(o.forEach((t=>{e=t.onSurfaceDrawError(a)||e})),!e)throw console.warn(a),a;return}r.afterDraw&&r.afterDraw(e),o.forEach((e=>e.onSurfaceDrawEnd(this)))}else o.forEach((e=>e.onSurfaceDrawSkipped(this)))}},h(y,"propTypes",p),h(y,"childContextTypes",{glSurface:a.default.object.isRequired,glParent:a.default.object.isRequired,glSizable:a.default.object.isRequired}),E}},1662:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=0,()=>++r);t.default=n},5337:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){if((0,n.default)(t!==r,"gl-react: Found a loop in the rendering graph.\nIf you want to get back previous state, please use `backbuffering` instead"),r instanceof o.default)for(let n=0;n<r.dependents.length;n++)e(t,r.dependents[n])};var n=a(r(1143)),o=a(r(4471));function a(e){return e&&e.__esModule?e:{default:e}}},2928:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const{userAgent:r,vendor:n}="undefined"!==typeof navigator?navigator:{userAgent:"",vendor:""};var o,a,i,s,u,l,c,f,d,h,p,g,_;d=function(...e){return e.forEach((function(t){return"string"===typeof t?e=e.concat(g(t)):e.push(t)})),_.apply(window,e)},_=function(...e){return Function.prototype.apply.call(console.log,console,e)},i=[{regex:/\*([^\*]+)\*/,replacer:function(e,t){return"%c"+t+"%c"},styles:function(){return["font-style: italic",""]}},{regex:/_([^_]+)_/,replacer:function(e,t){return"%c"+t+"%c"},styles:function(){return["font-weight: bold",""]}},{regex:/`([^`]+)`/,replacer:function(e,t){return"%c"+t+"%c"},styles:function(){return["background: rgb(255, 255, 219); padding: 1px 5px; border: 1px solid rgba(0, 0, 0, 0.1)",""]}},{regex:/\[c=(?:"|')?((?:(?!(?:"|')\]).)*)(?:"|')?\]((?:(?!\[c\]).)*)\[c\]/,replacer:function(e,t,r){return"%c"+r+"%c"},styles:function(e){return[e[1],""]}}],u=function(e){var t;return t=!1,i.forEach((function(r){if(r.regex.test(e))return t=!0})),t},s=function(e){var t;return t=[],i.forEach((function(r){var n;if(n=e.match(r.regex))return t.push({format:r,match:n})})),t.sort((function(e,t){return e.match.index-t.match.index}))},g=function(e){var t,r;for(r=[];u(e);)t=s(e)[0],e=e.replace(t.format.regex,t.format.replacer),r=r.concat(t.format.styles(t.match));return[e].concat(r)},f=function(){return/Safari/.test(r)&&/Apple Computer/.test(n)},c=function(){return/OPR/.test(r)&&/Opera/.test(n)},l=function(){return/Firefox/.test(r)},p=function(){var e;return!!(e=r.match(/AppleWebKit\/(\d+)\.(\d+)(\.|\+|\s)/))&&537.38<=parseInt(e[1],10)+parseInt(e[2],10)/100},h=function(){var e;return!!(e=r.match(/OPR\/(\d+)\./))&&15<=parseInt(e[1],10)},a=function(){return"undefined"!==typeof window&&(window.console.firebug||window.console.exception)},(o=function(){return/MSIE/.test(r)}()||l()&&!a()||c()&&!h()||f()&&!p()?_:d).l=_;var b=o;t.default=b},3224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Bus",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"connectSize",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"createSurface",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"listSurfaces",{enumerable:!0,get:function(){return a.list}}),Object.defineProperty(t,"GLSL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"LinearCopy",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"NearestCopy",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Shaders",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Uniform",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"VisitorLogger",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Visitors",{enumerable:!0,get:function(){return p.default}}),t.Backbuffer=void 0;var n=_(r(9334)),o=_(r(3121)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(1596)),i=_(r(5426)),s=_(r(8214)),u=_(r(356)),l=_(r(4471)),c=_(r(8554)),f=_(r(1139)),d=_(r(8321)),h=_(r(205)),p=_(r(4913));function g(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function _(e){return e&&e.__esModule?e:{default:e}}r(7414);t.Backbuffer="Backbuffer"},8057:function(e,t,r){"use strict";var n=r(2985),o=r(6552),a=r(9397),i=r(8273),s=r(7175),u=r(9306);function l(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=l.prototype;function f(e,t){return e.name<t.name?-1:1}c.bind=function(){var e;this.program||this._relink();var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(t>r)for(e=r;e<t;e++)this.gl.enableVertexAttribArray(e);else if(r>t)for(e=t;e<r;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},c.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(e,t,r,l){if(!t||1===arguments.length){var c=e;e=c.vertex,t=c.fragment,r=c.uniforms,l=c.attributes}var d=this,h=d.gl,p=d._vref;d._vref=i.shader(h,h.VERTEX_SHADER,e),p&&p.dispose(),d.vertShader=d._vref.shader;var g=this._fref;if(d._fref=i.shader(h,h.FRAGMENT_SHADER,t),g&&g.dispose(),d.fragShader=d._fref.shader,!r||!l){var _=h.createProgram();if(h.attachShader(_,d.fragShader),h.attachShader(_,d.vertShader),h.linkProgram(_),!h.getProgramParameter(_,h.LINK_STATUS)){var b=h.getProgramInfoLog(_);throw new u(b,"Error linking program:"+b)}r=r||s.uniforms(h,_),l=l||s.attributes(h,_),h.deleteProgram(_)}(l=l.slice()).sort(f);var y,E=[],m=[],v=[];for(y=0;y<l.length;++y){var T=l[y];if(T.type.indexOf("mat")>=0){for(var A=0|T.type.charAt(T.type.length-1),R=new Array(A),w=0;w<A;++w)R[w]=v.length,m.push(T.name+"["+w+"]"),"number"===typeof T.location?v.push(T.location+w):Array.isArray(T.location)&&T.location.length===A&&"number"===typeof T.location[w]?v.push(0|T.location[w]):v.push(-1);E.push({name:T.name,type:T.type,locations:R})}else E.push({name:T.name,type:T.type,locations:[v.length]}),m.push(T.name),"number"===typeof T.location?v.push(0|T.location):v.push(-1)}var x=0;for(y=0;y<v.length;++y)if(v[y]<0){for(;v.indexOf(x)>=0;)x+=1;v[y]=x}var N=new Array(r.length);function O(){d.program=i.program(h,d._vref,d._fref,m,v);for(var e=0;e<r.length;++e)N[e]=h.getUniformLocation(d.program,r[e].name)}O(),d._relink=O,d.types={uniforms:a(r),attributes:a(l)},d.attributes=o(h,d,E,v),Object.defineProperty(d,"uniforms",n(h,d,r,N))},e.exports=function(e,t,r,n,o){var a=new l(e);return a.update(t,r,n,o),a}},9306:function(e){function t(e,t,r){this.shortMessage=t||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,e.exports=t},6552:function(e,t,r){"use strict";e.exports=function(e,t,r,o){for(var a={},u=0,l=r.length;u<l;++u){var c=r[u],f=c.name,d=c.type,h=c.locations;switch(d){case"bool":case"int":case"float":i(e,t,h[0],o,1,a,f);break;default:if(d.indexOf("vec")>=0){if((p=d.charCodeAt(d.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+f+": "+d);i(e,t,h[0],o,p,a,f)}else{if(!(d.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+f+": "+d);var p;if((p=d.charCodeAt(d.length-1)-48)<2||p>4)throw new n("","Invalid data type for attribute "+f+": "+d);s(e,t,h,o,p,a,f)}}}return a};var n=r(9306);function o(e,t,r,n,o,a){this._gl=e,this._wrapper=t,this._index=r,this._locations=n,this._dimension=o,this._constFunc=a}var a=o.prototype;function i(e,t,r,n,a,i,s){for(var u=["gl","v"],l=[],c=0;c<a;++c)u.push("x"+c),l.push("x"+c);u.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var f=Function.apply(null,u),d=new o(e,t,r,n,a,f);Object.defineProperty(i,s,{set:function(t){return e.disableVertexAttribArray(n[r]),f(e,n[r],t),t},get:function(){return d},enumerable:!0})}function s(e,t,r,n,o,a,s){for(var u=new Array(o),l=new Array(o),c=0;c<o;++c)i(e,t,r[c],n,o,u,c),l[c]=u[c];Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<o;++t)l[t].location=e[t];else for(t=0;t<o;++t)l[t].location=e+t;return e},get:function(){for(var e=new Array(o),t=0;t<o;++t)e[t]=n[r[t]];return e},enumerable:!0}),u.pointer=function(t,a,i,s){t=t||e.FLOAT,a=!!a,i=i||o*o,s=s||0;for(var u=0;u<o;++u){var l=n[r[u]];e.vertexAttribPointer(l,o,t,a,i,s+u*o),e.enableVertexAttribArray(l)}};var f=new Array(o),d=e["vertexAttrib"+o+"fv"];Object.defineProperty(a,s,{set:function(t){for(var a=0;a<o;++a){var i=n[r[a]];if(e.disableVertexAttribArray(i),Array.isArray(t[0]))d.call(e,i,t[a]);else{for(var s=0;s<o;++s)f[s]=t[o*a+s];d.call(e,i,f)}}return t},get:function(){return u},enumerable:!0})}a.pointer=function(e,t,r,n){var o=this,a=o._gl,i=o._locations[o._index];a.vertexAttribPointer(i,o._dimension,e||a.FLOAT,!!t,r||0,n||0),a.enableVertexAttribArray(i)},a.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},2985:function(e,t,r){"use strict";var n=r(9397),o=r(9306);function a(e){return new Function("y","return function(){return y}")(e)}function i(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}e.exports=function(e,t,r,s){function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var a;if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+a+"fv(locations["+t+"],false,obj"+e+")"}throw new o("","Unknown uniform data type for "+name+": "+r)}if((a=r.charCodeAt(r.length-1)-48)<2||a>4)throw new o("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+a+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+a+"fv(locations["+t+"],obj"+e+")";default:throw new o("","Unrecognized data type for vector "+name+": "+r)}}}function l(e,t){if("object"!==typeof t)return[[e,t]];var r=[];for(var n in t){var o=t[n],a=e;parseInt(n)+""===n?a+="["+n+"]":a+="."+n,"object"===typeof o?r.push.apply(r,l(a,o)):r.push([a,o])}return r}function c(t){for(var n=["return function updateProperty(obj){"],o=l("",t),a=0;a<o.length;++a){var i=o[a],c=i[0],f=i[1];s[f]&&n.push(u(c,f,r[f].type))}return n.push("return obj}"),new Function("gl","locations",n.join("\n"))(e,s)}function f(n,u,l){if("object"===typeof l){var f=d(l);Object.defineProperty(n,u,{get:a(f),set:c(l),enumerable:!0,configurable:!1})}else s[l]?Object.defineProperty(n,u,{get:(h=l,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+h+"])}")(e,t,s)),set:c(l),enumerable:!0,configurable:!1}):n[u]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new o("","Invalid data type");return"b"===e.charAt(0)?i(r,!1):i(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r;if((r=e.charCodeAt(e.length-1)-48)<2||r>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+e);return i(r*r,0)}throw new o("","Unknown uniform data type for "+name+": "+e)}}(r[l].type);var h}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)f(t,r,e[r])}else for(var n in t={},e)f(t,n,e[n]);return t}var h=n(r,!0);return{get:a(d(h)),set:c(h),enumerable:!0,configurable:!0}}},9397:function(e){"use strict";e.exports=function(e,t){for(var r={},n=0;n<e.length;++n)for(var o=e[n].name.split("."),a=r,i=0;i<o.length;++i){var s=o[i].split("[");if(s.length>1){s[0]in a||(a[s[0]]=[]),a=a[s[0]];for(var u=1;u<s.length;++u){var l=parseInt(s[u]);u<s.length-1||i<o.length-1?(l in a||(u<s.length-1?a[l]=[]:a[l]={}),a=a[l]):a[l]=t?n:e[n].type}}else i<o.length-1?(s[0]in a||(a[s[0]]={}),a=a[s[0]]):a[s[0]]=t?n:e[n].type}return r}},7175:function(e,t){"use strict";t.uniforms=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],a=0;a<r;++a){var i=e.getActiveUniform(t,a);if(i){var s=o(e,i.type);if(i.size>1)for(var u=0;u<i.size;++u)n.push({name:i.name.replace("[0]","["+u+"]"),type:s});else n.push({name:i.name,type:s})}}return n},t.attributes=function(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=[],a=0;a<r;++a){var i=e.getActiveAttrib(t,a);i&&n.push({name:i.name,type:o(e,i.type)})}return n};var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function o(e,t){if(!n){var o=Object.keys(r);n={};for(var a=0;a<o.length;++a){var i=o[a];n[e[i]]=r[i]}}return n[t]}},8273:function(e,t,r){"use strict";t.shader=function(e,t,r){return c(e).getShaderReference(t,r)},t.program=function(e,t,r,n,o){return c(e).getProgram(t,r,n,o)};var n=r(9306),o=r(4779),a=new("undefined"===typeof WeakMap?r(7501):WeakMap),i=0;function s(e,t,r,n,o,a,i){this.id=e,this.src=t,this.type=r,this.shader=n,this.count=a,this.programs=[],this.cache=i}function u(e){this.gl=e,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,r=this.programs,n=0,o=r.length;n<o;++n){var a=e.programs[r[n]];a&&(delete e.programs[n],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var l=u.prototype;function c(e){var t=a.get(e);return t||(t=new u(e),a.set(e,t)),t}l.getShaderReference=function(e,t){var r=this.gl,a=this.shaders[e===r.FRAGMENT_SHADER|0],u=a[t];if(u&&r.isShader(u.shader))u.count+=1;else{var l=function(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(a);try{var s=o(i,r,t)}catch(u){throw console.warn("Failed to format compiler error: "+u),new n(i,"Error compiling shader:\n"+i)}throw new n(i,s.short,s.long)}return a}(r,e,t);u=a[t]=new s(i++,t,e,l,[],1,this)}return u},l.getProgram=function(e,t,r,o){var a=[e.id,t.id,r.join(":"),o.join(":")].join("@"),i=this.programs[a];return i&&this.gl.isProgram(i)||(this.programs[a]=i=function(e,t,r,o,a){var i=e.createProgram();e.attachShader(i,t),e.attachShader(i,r);for(var s=0;s<o.length;++s)e.bindAttribLocation(i,a[s],o[s]);if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var u=e.getProgramInfoLog(i);throw new n(u,"Error linking program: "+u)}return i}(this.gl,e.shader,t.shader,r,o),e.programs.push(a),t.programs.push(a)),i}},6973:function(e,t,r){var n=r(9932),o=r(3668);e.exports=function(e){for(var t=Array.isArray(e)?e:n(e),r=0;r<t.length;r++){var a=t[r];if("preprocessor"===a.type){var i=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){var s=i[1],u=i[2];return(s?o(u):u).trim()}}}}},8460:function(e,t,r){e.exports=function(e){var t,r,f,d=0,h=0,p=u,g=[],_=[],b=1,y=0,E=0,m=!1,v=!1,T="",A=a,R=n;"300 es"===(e=e||{}).version&&(A=s,R=i);var w={},x={};for(d=0;d<A.length;d++)w[A[d]]=!0;for(d=0;d<R.length;d++)x[R[d]]=!0;return function(e){return _=[],null!==e?function(e){d=0,e.toString&&(e=e.toString());var r;T+=e.replace(/\r\n/g,"\n"),f=T.length;for(;t=T[d],d<f;){switch(r=d,p){case 0:d=I();break;case 1:d=P();break;case 2:d=L();break;case 3:d=C();break;case 4:d=M();break;case 11:d=D();break;case 5:d=U();break;case l:d=B();break;case 9:d=S();break;case u:d=O()}if(r!==d)switch(T[r]){case"\n":y=0,++b;break;default:++y}}return h+=d,T=T.slice(d),_}(e):function(e){g.length&&N(g.join(""));return p=10,N("(eof)"),_}()};function N(e){e.length&&_.push({type:c[p],data:e,position:E,line:b,column:y})}function O(){return g=g.length?[]:g,"/"===r&&"*"===t?(E=h+d-1,p=0,r=t,d+1):"/"===r&&"/"===t?(E=h+d-1,p=1,r=t,d+1):"#"===t?(p=2,E=h+d,d):/\s/.test(t)?(p=9,E=h+d,d):(m=/\d/.test(t),v=/[^\w_]/.test(t),E=h+d,p=m?4:v?3:l,d)}function S(){return/[^\s]/g.test(t)?(N(g.join("")),p=u,d):(g.push(t),r=t,d+1)}function L(){return"\r"!==t&&"\n"!==t||"\\"===r?(g.push(t),r=t,d+1):(N(g.join("")),p=u,d)}function P(){return L()}function I(){return"/"===t&&"*"===r?(g.push(t),N(g.join("")),p=u,d+1):(g.push(t),r=t,d+1)}function C(){if("."===r&&/\d/.test(t))return p=5,d;if("/"===r&&"*"===t)return p=0,d;if("/"===r&&"/"===t)return p=1,d;if("."===t&&g.length){for(;j(g););return p=5,d}if(";"===t||")"===t||"("===t){if(g.length)for(;j(g););return N(t),p=u,d+1}var e=2===g.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;j(g););return p=u,d}return g.push(t),r=t,d+1}function j(e){for(var t,r,n=0;;){if(t=o.indexOf(e.slice(0,e.length+n).join("")),r=o[t],-1===t){if(n--+e.length>0)continue;r=e.slice(0,1).join("")}return N(r),E+=r.length,(g=g.slice(r.length)).length}}function D(){return/[^a-fA-F0-9]/.test(t)?(N(g.join("")),p=u,d):(g.push(t),r=t,d+1)}function M(){return"."===t||/[eE]/.test(t)?(g.push(t),p=5,r=t,d+1):"x"===t&&1===g.length&&"0"===g[0]?(p=11,g.push(t),r=t,d+1):/[^\d]/.test(t)?(N(g.join("")),p=u,d):(g.push(t),r=t,d+1)}function U(){return"f"===t&&(g.push(t),r=t,d+=1),/[eE]/.test(t)?(g.push(t),r=t,d+1):("-"!==t&&"+"!==t||!/[eE]/.test(r))&&/[^\d]/.test(t)?(N(g.join("")),p=u,d):(g.push(t),r=t,d+1)}function B(){if(/[^\d\w_]/.test(t)){var e=g.join("");return p=x[e]?8:w[e]?7:6,N(g.join("")),p=u,d}return g.push(t),r=t,d+1}};var n=r(7529),o=r(7679),a=r(2222),i=r(2914),s=r(9537),u=999,l=9999,c=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},9537:function(e,t,r){var n=r(2222);n=n.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},2222:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},2914:function(e,t,r){var n=r(7529);e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},7529:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7679:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},9932:function(e,t,r){var n=r(8460);e.exports=function(e,t){var r=n(t),o=[];return o=(o=o.concat(r(e))).concat(r(null))}},1143:function(e){"use strict";e.exports=function(e,t,r,n,o,a,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,a,i,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},6907:function(e){"use strict";e.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},8738:function(e){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},8897:function(e,t,r){"use strict";var n=r(6239),o={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e)return o;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return n({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var r=s[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var r=u[e];t[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:e}),t[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var r=l[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var r=c[e];t[r]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),t[r+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var r=f[e];t[r]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),t[r+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),t[r+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var r=d[e];t[r+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),t[r+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),t[r+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),t[r+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),t.any=n({args:["array"],pre:o,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=n({args:["array"],pre:o,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=n({args:["array","array"],pre:o,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},2861:function(e,t,r){var n=r(6907),o=r(8738),a="undefined"!==typeof Float64Array;function i(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(i);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function u(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var o="generic"===e;if(-1===t){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===t){a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",a)(l[e][0])}a=["'use strict'"];var i=n(t),u=i.map((function(e){return"i"+e})),c="this.offset+"+i.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),f=i.map((function(e){return"b"+e})).join(","),d=i.map((function(e){return"c"+e})).join(",");a.push("function "+r+"(a,"+f+","+d+",d){this.data=a","this.shape=["+f+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+i.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+r+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),o?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+r+"_get("+u.join(",")+"){"),o?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),a.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+i.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+i.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var h=i.map((function(e){return"a"+e+"=this.shape["+e+"]"})),p=i.map((function(e){return"c"+e+"=this.stride["+e+"]"}));a.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+p.join(","));for(var g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");a.push("return new "+r+"(this.data,"+i.map((function(e){return"a"+e})).join(",")+","+i.map((function(e){return"c"+e})).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+i.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+i.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");a.push("return new "+r+"(this.data,"+i.map((function(e){return"a"+e})).join(",")+","+i.map((function(e){return"b"+e})).join(",")+",c)}");var _=new Array(t),b=new Array(t);for(g=0;g<t;++g)_[g]="a[i"+g+"]",b[g]="b[i"+g+"]";a.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+_.join(",")+","+b.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(g=0;g<t;++g)a.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+i.map((function(e){return"shape["+e+"]"})).join(",")+","+i.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(l[e],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,r,n){if(void 0===e)return(0,l.array[0])([]);"number"===typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===r){r=new Array(i);for(var s=i-1,c=1;s>=0;--s)r[s]=c,c*=t[s]}if(void 0===n){n=0;for(s=0;s<i;++s)r[s]<0&&(n-=(t[s]-1)*r[s])}for(var f=function(e){if(o(e))return"buffer";if(a)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=l[f];d.length<=i+1;)d.push(u(f,d.length-1));return(0,d[i+1])(e,t,r,n)}},7066:function(e,t,r){"use strict";var n=r(6464);e.exports=function(e,t,r){return n(r="undefined"!==typeof r?r+"":" ",t)+e}},75:function(e,t,r){var n=r(4155);(function(){var t,r,o,a,i,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof n&&null!==n&&n.hrtime?(e.exports=function(){return(t()-i)/1e6},r=n.hrtime,a=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*n.uptime(),i=a-s):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)},4087:function(e,t,r){for(var n=r(75),o="undefined"===typeof window?r.g:window,a=["moz","webkit"],i="AnimationFrame",s=o["request"+i],u=o["cancel"+i]||o["cancelRequest"+i],l=0;!s&&l<a.length;l++)s=o[a[l]+"Request"+i],u=o[a[l]+"Cancel"+i]||o[a[l]+"CancelRequest"+i];if(!s||!u){var c=0,f=0,d=[];s=function(e){if(0===d.length){var t=n(),r=Math.max(0,16.666666666666668-(t-c));c=r+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(r){setTimeout((function(){throw r}),0)}}),Math.round(r))}return d.push({handle:++f,callback:e,cancelled:!1}),f},u=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){u.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}},6464:function(e){"use strict";var t,r="";e.exports=function(e,n){if("string"!==typeof e)throw new TypeError("expected a string");if(1===n)return e;if(2===n)return e+e;var o=e.length*n;if(t!==e||"undefined"===typeof t)t=e,r="";else if(r.length>=o)return r.substr(0,o);for(;o>r.length&&n>1;)1&n&&(r+=e),n>>=1,e+=e;return r=(r+=e).substr(0,o)}},8975:function(e,t,r){var n;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return s(l(e),arguments)}function i(e,t){return a.apply(null,[e].concat(t||[]))}function s(e,t){var r,n,i,s,u,l,c,f,d,h=1,p=e.length,g="";for(n=0;n<p;n++)if("string"===typeof e[n])g+=e[n];else if("object"===typeof e[n]){if((s=e[n]).keys)for(r=t[h],i=0;i<s.keys.length;i++){if(void 0==r)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));r=r[s.keys[i]]}else r=s.param_no?t[s.param_no]:t[h++];if(o.not_type.test(s.type)&&o.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),o.numeric_arg.test(s.type)&&"number"!==typeof r&&isNaN(r))throw new TypeError(a("[sprintf] expecting number but found %T",r));switch(o.number.test(s.type)&&(f=r>=0),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}o.json.test(s.type)?g+=r:(!o.number.test(s.type)||f&&!s.sign?d="":(d=f?"+":"-",r=r.toString().replace(o.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",c=s.width-(d+r).length,u=s.width&&c>0?l.repeat(c):"",g+=s.align?d+r+u:"0"===l?d+u+r:u+d+r)}return g}var u=Object.create(null);function l(e){if(u[e])return u[e];for(var t,r=e,n=[],a=0;r;){if(null!==(t=o.text.exec(r)))n.push(t[0]);else if(null!==(t=o.modulo.exec(r)))n.push("%");else{if(null===(t=o.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var i=[],s=t[2],l=[];if(null===(l=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=o.key_access.exec(s)))i.push(l[1]);else{if(null===(l=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(l[1])}t[2]=i}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return u[e]=n}t.sprintf=a,t.vsprintf=i,"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=i,void 0===(n=function(){return{sprintf:a,vsprintf:i}}.call(t,r,t,e))||(e.exports=n))}()},316:function(e,t,r){"use strict";var n=r(746),o=r(6841),a=r(8764).Buffer;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var i="undefined"!==typeof Uint8ClampedArray,s="undefined"!==typeof BigUint64Array,u="undefined"!==typeof BigInt64Array,l=r.g.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=o([32,0])),l.BIGUINT64||(l.BIGUINT64=o([32,0])),l.BIGINT64||(l.BIGINT64=o([32,0])),l.BUFFER||(l.BUFFER=o([32,0]));var c=l.DATA,f=l.BUFFER;function d(e){if(e){var t=e.length||e.byteLength,r=n.log2(t);c[r].push(e)}}function h(e){e=n.nextPow2(e);var t=n.log2(e),r=c[t];return r.length>0?r.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(h(e),0,e)}function g(e){return new Uint16Array(h(2*e),0,e)}function _(e){return new Uint32Array(h(4*e),0,e)}function b(e){return new Int8Array(h(e),0,e)}function y(e){return new Int16Array(h(2*e),0,e)}function E(e){return new Int32Array(h(4*e),0,e)}function m(e){return new Float32Array(h(4*e),0,e)}function v(e){return new Float64Array(h(8*e),0,e)}function T(e){return i?new Uint8ClampedArray(h(e),0,e):p(e)}function A(e){return s?new BigUint64Array(h(8*e),0,e):null}function R(e){return u?new BigInt64Array(h(8*e),0,e):null}function w(e){return new DataView(h(e),0,e)}function x(e){e=n.nextPow2(e);var t=n.log2(e),r=f[t];return r.length>0?r.pop():new a(e)}t.free=function(e){if(a.isBuffer(e))f[n.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|n.log2(t);c[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){d(e.buffer)},t.freeArrayBuffer=d,t.freeBuffer=function(e){f[n.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return h(e);switch(t){case"uint8":return p(e);case"uint16":return g(e);case"uint32":return _(e);case"int8":return b(e);case"int16":return y(e);case"int32":return E(e);case"float":case"float32":return m(e);case"double":case"float64":return v(e);case"uint8_clamped":return T(e);case"bigint64":return R(e);case"biguint64":return A(e);case"buffer":return x(e);case"data":case"dataview":return w(e);default:return null}return null},t.mallocArrayBuffer=h,t.mallocUint8=p,t.mallocUint16=g,t.mallocUint32=_,t.mallocInt8=b,t.mallocInt16=y,t.mallocInt32=E,t.mallocFloat32=t.mallocFloat=m,t.mallocFloat64=t.mallocDouble=v,t.mallocUint8Clamped=T,t.mallocBigUint64=A,t.mallocBigInt64=R,t.mallocDataView=w,t.mallocBuffer=x,t.clearCache=function(){for(var e=0;e<32;++e)l.UINT8[e].length=0,l.UINT16[e].length=0,l.UINT32[e].length=0,l.INT8[e].length=0,l.INT16[e].length=0,l.INT32[e].length=0,l.FLOAT[e].length=0,l.DOUBLE[e].length=0,l.BIGUINT64[e].length=0,l.BIGINT64[e].length=0,l.UINT8C[e].length=0,c[e].length=0,f[e].length=0}},8706:function(e){"use strict";e.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,o=e[0],a=e[0],i=1;i<n;++i)if(a=o,t(o=e[i],a)){if(i===r){r++;continue}e[r++]=o}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],o=e[0],a=1;a<r;++a,o=n)if(o=n,(n=e[a])!==o){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},3755:function(e,t,r){var n=r(5748);e.exports=function(){var e={};return function(t){if(("object"!==typeof t||null===t)&&"function"!==typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},5748:function(e){e.exports=function(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}},7501:function(e,t,r){var n=r(3755);e.exports=function(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){return e(t).value=r,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},6113:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(1412);class o extends n.WebGLTextureLoaderSyncHashCache{constructor(...e){var t,r,n;super(...e),n={},(r="disposes")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}canLoad(e){return e instanceof HTMLCanvasElement}inputHash(e){return e}getNoCache(e){const{gl:t}=this,{width:r,height:n}=e,o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),{texture:o,width:r,height:n}}update(e){const{gl:t}=this,{texture:r}=this.get(e);t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}}n.globalRegistry.add(o);var a=o;t.default=a},4927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(1412);class o extends n.WebGLTextureLoaderAsyncHashCache{canLoad(e){return"string"===typeof e}inputHash(e){return e}loadNoCache(e){const{gl:t}=this;let r;return{promise:new Promise(((t,n)=>r=function(e,t,r){let n=new window.Image;return"data:"!==e.slice(0,5)&&(n.crossOrigin=!0),n.onload=function(){n&&t(n),n=null},n.onabort=n.onerror=r,n.src=e,function(){n&&(n.onload=null,n.onerror=null,n.onabort=null,n.src="",n=null)}}(e,t,n))).then((e=>{const{width:r,height:n}=e,o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),{texture:o,width:r,height:n}})),dispose:()=>r()}}}n.globalRegistry.add(o);var a=o;t.default=a},9263:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(1412);class o extends n.WebGLTextureLoaderAsyncHashCache{canLoad(e){return e instanceof HTMLVideoElement}inputHash(e){return e}loadNoCache(e){const{gl:t}=this,{width:r,height:n}=e;let o;return{dispose:()=>{clearTimeout(o)},promise:new Promise(((r,n)=>{const a=()=>{if(e.videoWidth>0){const n=t.createTexture(),{videoWidth:o,videoHeight:a}=e;t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r({texture:n,width:o,height:a})}else o=setTimeout(a,100)};a()}))}}update(e){const{gl:t}=this,r=this.get(e);r&&(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e))}}n.globalRegistry.add(o);var a=o;t.default=a},5888:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CanvasTextureLoader",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"VideoTextureLoader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ImageURLTextureLoader",{enumerable:!0,get:function(){return a.default}});var n=i(r(6113)),o=i(r(9263)),a=i(r(4927));function i(e){return e&&e.__esModule?e:{default:e}}},7414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(1412),a=(n=r(1298))&&n.__esModule?n:{default:n};class i extends o.WebGLTextureLoaderSyncHashCache{constructor(e){super(e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"floatSupported",void 0),this.floatSupported=e.getExtension("OES_texture_float_linear")}canLoad(e){return e.shape&&e.data&&e.stride}inputHash(e){return e}getNoCache(e){const{gl:t}=this,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const[n,o]=e.shape;return(0,a.default)(t,r,e,this.floatSupported),{texture:r,width:n,height:o}}update(e){const{gl:t}=this,{texture:r}=this.get(e);t.bindTexture(t.TEXTURE_2D,r),(0,a.default)(t,r,e,this.floatSupported)}}o.globalRegistry.add(i);var s=i;t.default=s},1298:function(e,t,r){"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i,s,u,l=d(r(2861)),c=d(r(8897)),f=d(r(316));function d(e){return e&&e.__esModule?e:{default:e}}"undefined"===typeof n&&(r.g.Buffer=(a=o=class{},u=e=>e instanceof n,(s="isBuffer")in(i=o)?Object.defineProperty(i,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[s]=u,a));t.default=(e,t,r,n)=>{const o="undefined"!==typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext;let a=r.dtype,i=r.shape.slice(),s=e.getParameter(e.MAX_TEXTURE_SIZE);if(i[0]<0||i[0]>s||i[1]<0||i[1]>s)throw new Error("gl-react: Invalid texture size");let u=function(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}(i,r.stride.slice()),d=0;"float32"===a?d=e.FLOAT:"float64"===a?(d=e.FLOAT,u=!1,a="float32"):"uint8"===a?d=e.UNSIGNED_BYTE:(d=e.UNSIGNED_BYTE,u=!1,a="uint8");let h,p=0,g=0;if(2===i.length)g=p=e.LUMINANCE,i=[i[0],i[1],1],r=(0,l.default)(r.data,i,[r.stride[0],r.stride[1],1],r.offset);else{if(3!==i.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===i[2])g=p=e.ALPHA,o||(n=!1);else if(2===i[2])g=p=e.LUMINANCE_ALPHA,o||(n=!1);else if(3===i[2])p=e.RGB,g=o?e.RGB:e.RGB32F;else{if(4!==i[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");p=e.RGBA,g=o?e.RGBA:e.RGBA32F}}d!==e.FLOAT||n||(d=e.UNSIGNED_BYTE,u=!1);let _,b=r.size;if(u)h=0===r.offset&&r.data.length===b?r.data:r.data.subarray(r.offset,r.offset+b);else{let t=[i[2],i[2]*i[0],1];if("float32"!==a&&"float64"!==a||d!==e.UNSIGNED_BYTE){_=f.default.malloc(b,a);let e=(0,l.default)(_,i,t,0);c.default.assign(e,r)}else{_=f.default.malloc(b,"uint8"),function(e,t){c.default.muls(e,t,255)}((0,l.default)(_,i,t,0),r)}h=_.subarray(0,b)}e.texImage2D(e.TEXTURE_2D,0,g,i[0],i[1],0,p,d,h),_&&f.default.free(_)}},6145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(1882))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t=o.default){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"loaders",void 0),this.loaders=t.get().map((t=>new t(e)))}dispose(){this.loaders.forEach((e=>e.dispose()))}resolve(e){return this.loaders.find((t=>t.canLoad(e)))}}},434:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){var e,t,r;r=[],(t="_loaders")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}add(e){this._loaders.push(e),this._loaders.sort(((e,t)=>("number"===typeof t.priority?t.priority:0)-("number"===typeof e.priority?e.priority:0)))}remove(e){const t=this._loaders.indexOf(e);-1!==t&&this._loaders.splice(t,1)}get(){return this._loaders}}},6994:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e){var t,r,n;n=void 0,(r="gl")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.gl=e}dispose(){}canLoad(e){return!1}load(e){return Promise.reject("load() is not implemented")}get(e){return null}update(e){}}},5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(6994))&&n.__esModule?n:{default:n};function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=new Promise((()=>{}));class s extends o.default{constructor(...e){super(...e),a(this,"disposes",new Map),a(this,"inputs",new Map),a(this,"promises",new Map),a(this,"results",new Map),a(this,"_disposed",!1)}inputHash(e){return""}loadNoCache(e){return{promise:Promise.reject(new Error("loadNoCache is not implemented")),dispose:()=>{}}}dispose(){const{gl:e,promises:t,results:r,inputs:n,disposes:o}=this;o.forEach((e=>e())),r.forEach((e=>{this.disposeTexture(e.texture)})),t.clear(),r.clear(),n.clear(),o.clear(),this._disposed=!0}disposeTexture(e){this.gl.deleteTexture(e)}load(e){const t=this.inputHash(e),r=this.promises.get(t);if(r)return r;const n=this.loadNoCache(e);this.disposes.set(t,n.dispose);const o=n.promise.then((e=>this.promises.has(t)?(this.disposes.delete(t),this.results.set(t,e),e):i));return this.promises.set(t,o),o}get(e){return this.results.get(this.inputHash(e))}cancelLoad(e){const t=this.inputHash(e);this.promises.delete(t);const r=this.disposes.get(t);r&&(r(),this.disposes.delete(t))}}var u=s;t.default=u},5799:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(6994))&&n.__esModule?n:{default:n};function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i extends o.default{constructor(...e){super(...e),a(this,"results",new Map),a(this,"promises",new Map),a(this,"_disposed",!1)}inputHash(e){return""}getNoCache(e){throw new Error("getNoCache must be implemented")}dispose(){const{gl:e,results:t,promises:r}=this;t.forEach((e=>{this.disposeTexture(e.texture)})),t.clear(),r.clear(),this._disposed=!0}disposeTexture(e){this.gl.deleteTexture(e)}get(e){const t=this.inputHash(e),r=this.results.get(t);if(r)return r;const n=this.getNoCache(e);return this.results.set(t,n),n}load(e){const t=this.inputHash(e),r=this.promises.get(t);if(r)return r;const n=Promise.resolve(this.get(e));return this.promises.set(t,n),n}}var s=i;t.default=s},1882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(434))&&n.__esModule?n:{default:n};const a="undefined"===typeof window?r.g:window,i="__webglTextureLoader_registry";var s=a[i]||(a[i]=new o.default);t.default=s},1412:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WebGLTextureLoader",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"WebGLTextureLoaderAsyncHashCache",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"WebGLTextureLoaderSyncHashCache",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"LoadersRegistry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"LoaderResolver",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"globalRegistry",{enumerable:!0,get:function(){return u.default}});var n=l(r(6994)),o=l(r(5)),a=l(r(5799)),i=l(r(434)),s=l(r(6145)),u=l(r(1882));function l(e){return e&&e.__esModule?e:{default:e}}}}]);