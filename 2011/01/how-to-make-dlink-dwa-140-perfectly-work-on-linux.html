<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="author" content="Gaëtan Renaudeau"/><meta name="description"/><meta name="keywords" content="linux"/><meta name="HandheldFriendly" content="True"/><meta name="MobileOptimized" content="320"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@greweb"/><meta name="twitter:title" content="How to make DLink DWA-140 B2 perfectly work on Linux"/><meta name="og:title" content="How to make DLink DWA-140 B2 perfectly work on Linux"/><meta name="twitter:creator" content="@greweb"/><title>@greweb - How to make DLink DWA-140 B2 perfectly work on Linux</title><link href="http://fonts.googleapis.com/css?family=Fredericka+the+Great|Arapey|Roboto:400,700,400italic" rel="stylesheet" type="text/css"/><link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/styles/default.min.css"/><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/highlight.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/javascript.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/cpp.min.js"></script><script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/languages/glsl.min.js"></script><link rel="stylesheet" href="/style/main.css"/><meta name="next-head-count" content="21"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-682ed58dee9e3e5c50ef.js" defer=""></script><script src="/_next/static/chunks/framework-c93ed74a065331c4bd75.js" defer=""></script><script src="/_next/static/chunks/main-005750ed97c879f2d59b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-092526a60f8cb7d1b3d6.js" defer=""></script><script src="/_next/static/chunks/988-83f401159b53b3fa4628.js" defer=""></script><script src="/_next/static/chunks/pages/%5Byear%5D/%5Bmonth%5D/%5Bslug%5D-0f67605ef98ac8184736.js" defer=""></script><script src="/_next/static/Gc3ZnZoHdd_piNJIZ1P_F/_buildManifest.js" defer=""></script><script src="/_next/static/Gc3ZnZoHdd_piNJIZ1P_F/_ssgManifest.js" defer=""></script><style id="__jsx-2519965637">.block.jsx-2519965637{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.block.jsx-2519965637 .right.jsx-2519965637{padding:10px;}.block.jsx-2519965637 .social.jsx-2519965637{margin-top:10px;}.block.jsx-2519965637 .social.jsx-2519965637 a.jsx-2519965637{padding:10px;}.block.jsx-2519965637 .social.jsx-2519965637 img.jsx-2519965637{height:20px;}</style><style id="__jsx-3621368397">.container.jsx-3621368397{min-height:100vh;padding:0 0.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style id="__jsx-3469673304">html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto, Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue, sans-serif;}*{box-sizing:border-box;}a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}a:hover,a:active{-webkit-text-decoration:underline;text-decoration:underline;}</style></head><body><div id="__next"><div class="jsx-3621368397 container"><div id="container"><div id="main"><div id="content"><article><header><h1><a href="/">How to make DLink DWA-140 B2 perfectly work on Linux</a></h1><time class="date" dateTime="2011-01-05">2011-01-05</time><span class="tags"><a class="tag">linux</a></span></header><div class="entry-content"><p><strong>[EDIT] Note: the DWA-140 B2 is now supported by recent Linux version.</strong></p>
<p>I’m using ArchLinux and I finally make my DWA-140 B2 Wifi USB adaptor work !</p>
<p>If you have the same problem, you can read this article to fix it !</p>
<!--more-->

<p><strong>My conf</strong>:</p>
<ul>
<li>Linux Kernel: <em>2.6.36</em></li>
<li>Architecture: <em>x64</em></li>
<li>Device: <em>ID 07d1:3c0a D-Link System DWA-140 RangeBooster N Adapter(rev.B2) [Ralink RT2870]</em></li>
</ul>
<h2 id="what-to-use-">What to use ?</h2>
<p>So the only way I found to make it work nicely is to use <strong>ndiswrapper</strong>, a Windows XP driver wrapper, and <strong>wpa_supplicant</strong>, a WLAN tool.</p>
<p>First, I’ve tried some RaLink drivers but this was not really great, I’ve succeed to make <code>ra2870</code> work only one time but there was some lags each 20 seconds (like 1000ms ping frequently).</p>
<p>Moreover, I recommend not using NetworkManager with this method, it seems ndiswrapper and networkmanager produced awful results for this bundle (like waiting 30s for wifi to connect (or not connecting!), or freezing my Linux, …). Use wpa_supplicant utils like netcfg instead of ! </p>
<h2 id="procedure">Procedure</h2>
<p>Alternatives rejected, here is the solution step by step :</p>
<h3 id="pre-conditions">Pre-conditions</h3>
<p>With a wired connection, install these packages (with your package manager) : <strong>ndiswrapper</strong>, <strong>wpa_supplicant</strong> and (optional) <strong>netcfg</strong>.</p>
<p>Unfortunately, I had some freeze issues with the current ndiswrapper repository version so I checkout ndiswrapper SVN source code on  and recompile it. <strong>Maybe you have to do the same.</strong></p>
<ol>
<li> Don’t plug your bundle yet. Insert the CD of the product. It contains the driver we need for ndiswrapper. You need to find the <code>/Drivers/WinXPx64/</code> (it may depend on your arch) <strong>.inf</strong> file. You can also download the last driver on the <a href="http://www.dlink.com/products/?tab=3&amp;pid=DWA-140&amp;rev=DWA-140_revB">D-Link website</a>.</li>
<li> Go on commandline in root mode and type:</li>
</ol>
<pre><code class="language-bash">ndiswrapper -i {path of the .inf file}
</code></pre>
<p>Example:</p>
<pre><code class="language-bash">ndiswrapper -i /media/cdrom0/Drivers/WinXPx64/Drt2870.inf
</code></pre>
<ul>
<li>Plug your bundle and check if the command <code>ndiswrapper -l</code> say something like: </li>
</ul>
<pre><code>drt2870 : driver installed  
device (07D1:3C0A) present
</code></pre>
<p>If not you maybe need to <code>ndiswrapper -r drt2870</code> to remove the driver and return to the second step trying another <code>/Drivers/*/*.inf</code> file. </p>
<ul>
<li>  Next, you need to configure your <code>wpa_supplicant.conf</code> configuration file for  your wifi access point. Refer to the <a href="https://wiki.archlinux.org/index.php/WPA_supplicant">documentation</a>.</li>
<li>  Try to run <code>wpa_supplicant</code> : </li>
</ul>
<pre><code class="language-bash">wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf
</code></pre>
<p>Once this working, you maybe need to run dhcpd :</p>
<pre><code class="language-bash">dhcpd wlan0
</code></pre>
<ul>
<li>  Now you can try your internet connection, by pinging google.com or try to browse the web.</li>
<li>If it works, you can save your configuration, refer to the <a href="https://wiki.archlinux.org/index.php/WPA_supplicant">documentation</a>. </li>
<li><em>For any problem, feel free to comment this article.</em>*</li>
</ul>
</div><footer><div class="jsx-2519965637 block"><img src="http://greweb.me/profile.jpg" width="100" class="jsx-2519965637"/><div class="jsx-2519965637 right"><div class="jsx-2519965637 description">creative coder experimenting with GLSL shaders, Rust, and fountain pens robot plots. infinite noise explorer.</div><div class="jsx-2519965637 social"><a href="https://twitter.com/greweb" class="jsx-2519965637"><img alt="" src="/icons/twitter.svg" class="jsx-2519965637"/></a><a href="https://instagram.com/greweb" class="jsx-2519965637"><img alt="" src="/icons/instagram.svg" class="jsx-2519965637"/></a><a href="https://github.com/gre" class="jsx-2519965637"><img alt="" src="/icons/github.svg" class="jsx-2519965637"/></a><a href="https://twitch.tv/greweb" class="jsx-2519965637"><img alt="" src="/icons/twitch.svg" class="jsx-2519965637"/></a><a href="https://greweb.itch.io" class="jsx-2519965637"><img alt="" src="/icons/iconmonstr-gamepad-3.svg" class="jsx-2519965637"/></a><a href="https://hic.link/greweb" class="jsx-2519965637"><img alt="" src="/icons/hic.svg" class="jsx-2519965637"/></a></div></div></div></footer></article></div></div></div><script>hljs.highlightAll();</script></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"2011-01-05-how-to-make-dlink-dwa-140-perfectly-work-on-linux","year":"2011","month":"01","day":"05","slug":"how-to-make-dlink-dwa-140-perfectly-work-on-linux","content":"\u003cp\u003e\u003cstrong\u003e[EDIT] Note: the DWA-140 B2 is now supported by recent Linux version.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eI’m using ArchLinux and I finally make my DWA-140 B2 Wifi USB adaptor work !\u003c/p\u003e\n\u003cp\u003eIf you have the same problem, you can read this article to fix it !\u003c/p\u003e\n\u003c!--more--\u003e\n\n\u003cp\u003e\u003cstrong\u003eMy conf\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLinux Kernel: \u003cem\u003e2.6.36\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003eArchitecture: \u003cem\u003ex64\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003eDevice: \u003cem\u003eID 07d1:3c0a D-Link System DWA-140 RangeBooster N Adapter(rev.B2) [Ralink RT2870]\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"what-to-use-\"\u003eWhat to use ?\u003c/h2\u003e\n\u003cp\u003eSo the only way I found to make it work nicely is to use \u003cstrong\u003endiswrapper\u003c/strong\u003e, a Windows XP driver wrapper, and \u003cstrong\u003ewpa_supplicant\u003c/strong\u003e, a WLAN tool.\u003c/p\u003e\n\u003cp\u003eFirst, I’ve tried some RaLink drivers but this was not really great, I’ve succeed to make \u003ccode\u003era2870\u003c/code\u003e work only one time but there was some lags each 20 seconds (like 1000ms ping frequently).\u003c/p\u003e\n\u003cp\u003eMoreover, I recommend not using NetworkManager with this method, it seems ndiswrapper and networkmanager produced awful results for this bundle (like waiting 30s for wifi to connect (or not connecting!), or freezing my Linux, …). Use wpa_supplicant utils like netcfg instead of ! \u003c/p\u003e\n\u003ch2 id=\"procedure\"\u003eProcedure\u003c/h2\u003e\n\u003cp\u003eAlternatives rejected, here is the solution step by step :\u003c/p\u003e\n\u003ch3 id=\"pre-conditions\"\u003ePre-conditions\u003c/h3\u003e\n\u003cp\u003eWith a wired connection, install these packages (with your package manager) : \u003cstrong\u003endiswrapper\u003c/strong\u003e, \u003cstrong\u003ewpa_supplicant\u003c/strong\u003e and (optional) \u003cstrong\u003enetcfg\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eUnfortunately, I had some freeze issues with the current ndiswrapper repository version so I checkout ndiswrapper SVN source code on  and recompile it. \u003cstrong\u003eMaybe you have to do the same.\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e Don’t plug your bundle yet. Insert the CD of the product. It contains the driver we need for ndiswrapper. You need to find the \u003ccode\u003e/Drivers/WinXPx64/\u003c/code\u003e (it may depend on your arch) \u003cstrong\u003e.inf\u003c/strong\u003e file. You can also download the last driver on the \u003ca href=\"http://www.dlink.com/products/?tab=3\u0026amp;pid=DWA-140\u0026amp;rev=DWA-140_revB\"\u003eD-Link website\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e Go on commandline in root mode and type:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003endiswrapper -i {path of the .inf file}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003endiswrapper -i /media/cdrom0/Drivers/WinXPx64/Drt2870.inf\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ePlug your bundle and check if the command \u003ccode\u003endiswrapper -l\u003c/code\u003e say something like: \u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003edrt2870 : driver installed  \ndevice (07D1:3C0A) present\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf not you maybe need to \u003ccode\u003endiswrapper -r drt2870\u003c/code\u003e to remove the driver and return to the second step trying another \u003ccode\u003e/Drivers/*/*.inf\u003c/code\u003e file. \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e  Next, you need to configure your \u003ccode\u003ewpa_supplicant.conf\u003c/code\u003e configuration file for  your wifi access point. Refer to the \u003ca href=\"https://wiki.archlinux.org/index.php/WPA_supplicant\"\u003edocumentation\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e  Try to run \u003ccode\u003ewpa_supplicant\u003c/code\u003e : \u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ewpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce this working, you maybe need to run dhcpd :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003edhcpd wlan0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e  Now you can try your internet connection, by pinging google.com or try to browse the web.\u003c/li\u003e\n\u003cli\u003eIf it works, you can save your configuration, refer to the \u003ca href=\"https://wiki.archlinux.org/index.php/WPA_supplicant\"\u003edocumentation\u003c/a\u003e. \u003c/li\u003e\n\u003cli\u003e\u003cem\u003eFor any problem, feel free to comment this article.\u003c/em\u003e*\u003c/li\u003e\n\u003c/ul\u003e\n","data":{"title":"How to make DLink DWA-140 B2 perfectly work on Linux","author":"Gaetan","layout":"post","permalink":"/2011/01/how-to-make-dlink-dwa-140-perfectly-work-on-linux/","tags":["linux"]}},"__N_SSG":true},"page":"/[year]/[month]/[slug]","query":{"year":"2011","month":"01","slug":"how-to-make-dlink-dwa-140-perfectly-work-on-linux"},"buildId":"Gc3ZnZoHdd_piNJIZ1P_F","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>